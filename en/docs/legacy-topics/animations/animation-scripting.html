<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-Unity@2022.1 plugin-docs plugin-id-default docs-doc-id-unity/legacy-topics/animations/动画脚本（旧版）">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<link rel="alternate" type="application/rss+xml" href="/en/blog/rss.xml" title="Danyow RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/en/blog/atom.xml" title="Danyow Atom Feed">
<link rel="alternate" type="application/json" href="/en/blog/feed.json" title="Danyow JSON Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-141789564-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-141789564-1",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Danyow" href="/en/opensearch.xml">
<link rel="alternate" type="application/rss+xml" href="/en/changelog/rss.xml" title="日志 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/en/changelog/atom.xml" title="日志 Atom Feed">
<link rel="alternate" type="application/json" href="/en/changelog/feed.json" title="日志 JSON Feed">
<link rel="icon" href="/en/img/logo.png">
<link rel="manifest" href="/en/manifest.json">
<meta name="theme-color" content="rgb(37, 194, 160)">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">
<link rel="apple-touch-icon" href="/en/img/logo.png">
<link rel="mask-icon" href="/en/img/logo.png" color="rgb(62, 204, 94)">
<meta name="msapplication-TileImage" content="/en/img/logo.png">
<meta name="msapplication-TileColor" content="#000">
<link rel="stylesheet" href="/katex/katex.min.css"><title data-rh="true">动画脚本（旧版） | Danyow</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://danyow.github.io/en/docs/legacy-topics/animations/animation-scripting"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="Unity@2022.1"><meta data-rh="true" name="docusaurus_tag" content="docs-default-Unity@2022.1"><meta data-rh="true" name="docsearch:version" content="Unity@2022.1"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-Unity@2022.1"><meta data-rh="true" property="og:title" content="动画脚本（旧版） | Danyow"><meta data-rh="true" name="description" content="Unity 的动画系统可让您创建精美的动画蒙皮角色。动画系统支持动画混合 (blending)、混组 (mixing)、附加动画 (additive animations)、行走周期时间同步、动画层、动画播放所有方面（时间、速度、混合权重）的控制、每个顶点有 1 个、2 个或 4 个骨骼的网格蒙皮以及支持物理性布娃娃和程序化动画。为了获得最佳结果，建议您阅读创建优化的角色模型页面，了解在 Unity 中创建具有最佳性能的骨架角色的最佳做法和技巧。"><meta data-rh="true" property="og:description" content="Unity 的动画系统可让您创建精美的动画蒙皮角色。动画系统支持动画混合 (blending)、混组 (mixing)、附加动画 (additive animations)、行走周期时间同步、动画层、动画播放所有方面（时间、速度、混合权重）的控制、每个顶点有 1 个、2 个或 4 个骨骼的网格蒙皮以及支持物理性布娃娃和程序化动画。为了获得最佳结果，建议您阅读创建优化的角色模型页面，了解在 Unity 中创建具有最佳性能的骨架角色的最佳做法和技巧。"><link data-rh="true" rel="icon" href="/en/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://danyow.github.io/en/docs/legacy-topics/animations/animation-scripting"><link data-rh="true" rel="alternate" href="https://danyow.github.io/docs/legacy-topics/animations/animation-scripting" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://danyow.github.io/en/docs/legacy-topics/animations/animation-scripting" hreflang="en"><link data-rh="true" rel="alternate" href="https://danyow.github.io/docs/legacy-topics/animations/animation-scripting" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://S3KRFC060Q-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/en/assets/css/styles.bff76bc0.css">
<link rel="preload" href="/en/assets/js/runtime~main.8b3186ef.js" as="script">
<link rel="preload" href="/en/assets/js/main.4cfd5153.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_BxGa">Skip to main content</a></div><div class="announcementBar_yyVl" role="banner"><div class="announcementBarPlaceholder_Il1w"></div><div class="announcementBarContent_KFU1">⭐️ If you like, give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/danyow/danyow.github.io">GitHub</a> </div><button type="button" class="clean-btn close announcementBarClose_axA0" aria-label="Close"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top navbarHideable_FcXi"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/en/"><div class="navbar__logo"><img src="/en/img/logo.svg" alt="Danyow Logo" class="themedImage_aIr_ themedImage--light_DGIu" height="32" width="32"><img src="/en/img/logo-dark.svg" alt="Danyow Logo" class="themedImage_aIr_ themedImage--dark_RoHN" height="32" width="32"></div><b class="navbar__title">Danyow</b></a><a class="navbar__item navbar__link" href="/en/blog">博客</a><a class="navbar__item navbar__link" href="/en/changelog">日志</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/en/docs/animation-section/animation-section">Unity@2022.1</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/en/docs/next">v0 🚧</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/en/docs/legacy-topics/animations/animation-scripting">Unity@2022.1</a></li><li><a href="https://62455b8ed3daac0779429a1c--danyow.netlify.app/docs/lua/hello" target="_blank" rel="noopener noreferrer" class="dropdown__link">Lua@5.3<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_GWqj"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a class="dropdown__link" href="/en/versions">所有版本</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><span><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_NpMu"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg><span>English</span></span></a><ul class="dropdown__menu"><li><a href="/docs/legacy-topics/animations/animation-scripting" target="_self" rel="noopener noreferrer" class="dropdown__link">中文</a></li><li><a href="/en/docs/legacy-topics/animations/animation-scripting" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">English</a></li><li><a href="https://github.com/danyow/danyow.github.io/issues/3526" target="_blank" rel="noopener noreferrer" class="dropdown__link">Help Us Translate<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_GWqj"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><a href="https://github.com/danyow/danyow.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_IT2h colorModeToggle_o_qc"><button class="clean-btn toggleButton_pGki toggleButtonDisabled_vZLo" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_dYsV"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_WRF1"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_lGmL"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="docPage_zNSk"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_ecpa" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_NEdF"><div class="sidebar_Uz2u sidebarWithHideableNavbar_MFe1"><a tabindex="-1" class="sidebarLogo_iqfm" href="/en/"><img src="/en/img/logo.svg" alt="Danyow Logo" class="themedImage_aIr_ themedImage--light_DGIu" height="32" width="32"><img src="/en/img/logo-dark.svg" alt="Danyow Logo" class="themedImage_aIr_ themedImage--dark_RoHN" height="32" width="32"><b>Danyow</b></a><nav class="menu thin-scrollbar menu_XU2j menuWithAnnouncementBar_vo3y"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/animation-section/animation-section">动画</a><button aria-label="Toggle the collapsible sidebar category &#x27;动画&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/asset-store/asset-store">Unity Asset Store</a><button aria-label="Toggle the collapsible sidebar category &#x27;Unity Asset Store&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/asset-workflow/asset-workflow">资源工作流程</a><button aria-label="Toggle the collapsible sidebar category &#x27;资源工作流程&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/audio/audio">音频</a><button aria-label="Toggle the collapsible sidebar category &#x27;音频&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/creating-environments/creating-environments">World building</a><button aria-label="Toggle the collapsible sidebar category &#x27;World building&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/glossary">术语表</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/graphics/graphics">图形</a><button aria-label="Toggle the collapsible sidebar category &#x27;图形&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/input/input">输入</a><button aria-label="Toggle the collapsible sidebar category &#x27;输入&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/en/docs/legacy-topics/legacy-topics">旧版主题</a><button aria-label="Toggle the collapsible sidebar category &#x27;旧版主题&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/en/docs/legacy-topics/animations/animations">旧版动画系统</a><button aria-label="Toggle the collapsible sidebar category &#x27;旧版动画系统&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/en/docs/legacy-topics/animations/animation-scripting">动画脚本（旧版）</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/legacy-topics/animations/class-animation">动画</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/en/docs/legacy-topics/asset-bundles4x/asset-bundles4x">旧版 Asset Bundle</a><button aria-label="Toggle the collapsible sidebar category &#x27;旧版 Asset Bundle&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/en/docs/legacy-topics/asset-server/asset-server">Asset Server（团队许可证）</a><button aria-label="Toggle the collapsible sidebar category &#x27;Asset Server（团队许可证）&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/en/docs/legacy-topics/unity-analytics-sdk/unity-analytics-sdk">旧版 Unity Analytics（SDK 工作流程）</a><button aria-label="Toggle the collapsible sidebar category &#x27;旧版 Unity Analytics（SDK 工作流程）&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/navigation/navigation">导航和寻路</a><button aria-label="Toggle the collapsible sidebar category &#x27;导航和寻路&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/open-source-repositories/open-source-repositories">开源代码仓库</a><button aria-label="Toggle the collapsible sidebar category &#x27;开源代码仓库&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/packages-list/packages-list">Packages and feature sets</a><button aria-label="Toggle the collapsible sidebar category &#x27;Packages and feature sets&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/physics-section/physics-section">物理系统</a><button aria-label="Toggle the collapsible sidebar category &#x27;物理系统&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/platform-specific/platform-specific">平台开发</a><button aria-label="Toggle the collapsible sidebar category &#x27;平台开发&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/scripting-section/scripting-section">脚本</a><button aria-label="Toggle the collapsible sidebar category &#x27;脚本&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/search-overview/search-overview">Unity Search</a><button aria-label="Toggle the collapsible sidebar category &#x27;Unity Search&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/uitoolkits/uitoolkits">创建用户界面 (UI)</a><button aria-label="Toggle the collapsible sidebar category &#x27;创建用户界面 (UI)&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/unet/unet">多玩家和联网</a><button aria-label="Toggle the collapsible sidebar category &#x27;多玩家和联网&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/unity-manual/unity-manual">Unity User Manual 2022.1 (beta)</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/unity-overview/unity-overview">在 Unity 中操作</a><button aria-label="Toggle the collapsible sidebar category &#x27;在 Unity 中操作&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/unity-services/unity-services">Unity 服务</a><button aria-label="Toggle the collapsible sidebar category &#x27;Unity 服务&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/unity2d/unity2d">2D</a><button aria-label="Toggle the collapsible sidebar category &#x27;2D&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/video-player/video-player">视频概述</a><button aria-label="Toggle the collapsible sidebar category &#x27;视频概述&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/xr/xr">XR</a><button aria-label="Toggle the collapsible sidebar category &#x27;XR&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_Essf"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_bqna"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_vJqy"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_ygLL"><div class="docItemContainer_yJzi"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_nmcO" aria-label="breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/en/">🏠</a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/en/docs/legacy-topics/legacy-topics"><span itemprop="name">旧版主题</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/en/docs/legacy-topics/animations/animations"><span itemprop="name">旧版动画系统</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="item name">动画脚本（旧版）</span><meta itemprop="position" content="3"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: Unity@2022.1</span><div class="tocCollapsible_aX8Q theme-doc-toc-mobile tocMobile_By44"><button type="button" class="clean-btn tocCollapsibleButton_Va7b">On this page</button></div><div class="theme-doc-markdown markdown"><h1>动画脚本（旧版）</h1><p>Unity 的动画系统可让您创建精美的动画蒙皮角色。动画系统支持动画混合 (blending)、混组 (mixing)、附加动画 (additive animations)、行走周期时间同步、动画层、动画播放所有方面（时间、速度、混合权重）的控制、每个顶点有 1 个、2 个或 4 个骨骼的网格蒙皮以及支持物理性布娃娃和程序化动画。为了获得最佳结果，建议您阅读<a href="/en/docs/graphics/models/creating-dccassets/modeling-optimized-characters">创建优化的角色模型</a>页面，了解在 Unity 中创建具有最佳性能的骨架角色的最佳做法和技巧。</p><p>制作动画角色的过程涉及两个操作：在世界内<!-- -->_<!-- -->移动<!-- -->_<!-- -->角色并让它做相应的<!-- -->_<!-- -->动画<!-- -->_<!-- -->。如果您想了解有关移动角色的更多信息，请查看 <a href="/en/docs/physics-section/physics3dreference/class-character-controller">Character Controller 页面</a>。此页面重点介绍动画。角色的实际动画是通过 Unity 脚本接口完成的。</p><p>您可以下载<a href="http://unity3d.com/support/resources/example-projects/" target="_blank" rel="noopener noreferrer">示例演示</a>，其中介绍了预设动画角色。在此页面上学习了基础知识后，您还可以查看<a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/Animation.html" target="_blank" rel="noopener noreferrer">动画脚本接口</a>。</p><h2 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="动画混合">动画混合<a class="hash-link" href="#动画混合" title="Direct link to heading">​</a></h2><p>在当今的游戏中，动画混合 (blending) 是确保角色具有流畅动画的基本功能。动画师们创建单独的动画，例如，行走循环、奔跑循环、空闲动画或射击动画。在游戏过程中的任何时间点，您都需要能够从空闲动画转换到行走循环或反之。当然，您希望过渡平滑并避免突然的运动颠簸。</p><p>这便是动画混合的用武之地。在 Unity 中，您可以基于同一个角色播放任意数量的动画。所有动画将混合或添加到一起以生成最终动画。</p><p>我们的第一步是要让角色在空闲动画和行走动画之间平滑地混合。为了使脚本编写人员的工作更轻松，我们首先将动画的  <strong>Wrap Mode</strong>  设置为  <strong>Loop</strong> 。然后，我们将关闭  <strong>Play Automatically</strong>  以确保我们的脚本是播放动画的唯一地方。</p><p>我们的第一个角色动画脚本非常简单；我们只需要一些方法来检测角色的移动速度，然后在行走动画和空闲动画之间淡入淡出。对于此简单测试，我们将使用标准输入轴：</p><div class="codeBlockContainer_CBWl theme-code-block"><div class="codeBlockContent_vhl8" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_w2AC thin-scrollbar"><code class="codeBlockLines_OfWd"><span class="token-line" style="color:#393A34"><span class="token plain">function Update () {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   if (Input.GetAxis(&quot;Vertical&quot;) &amp;gt; 0.2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       animation.CrossFade (&quot;walk&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      animation.CrossFade (&quot;idle&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_R7VQ clean-btn"><span class="copyButtonIcons_Uqyx" aria-hidden="true"><svg class="copyButtonIcon_CtfL" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Mq1p" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>要在项目中使用此脚本，请执行以下操作：</p><p>1.使用  <strong>Assets <!-- -->&gt;<!-- --> Create <!-- -->&gt;<!-- --> Javascript</strong>  创建 Javascript 文件。 1.将代码复制并粘贴到该文件 1.将脚本拖到角色上（需要将其附加到具有动画的 <strong>游戏对象</strong> ）</p><p>按下 Play 按钮后，角色将在您按住向上箭头键时开始原地行走，而在松开按键时恢复到空闲姿势。</p><h2 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="动画层">动画层<a class="hash-link" href="#动画层" title="Direct link to heading">​</a></h2><p>“层”是一个非常有用的概念，用于对动画进行分组并确定加权优先级。</p><p>Unity 的动画系统可在任意数量的动画剪辑之间进行混合。您可以手动分配混合权重，也可直接使用  <strong>animation.CrossFade()</strong>  自动分配权重。</p><h3 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="混合权重总是经过归一化后再应用">混合权重总是经过归一化后再应用<a class="hash-link" href="#混合权重总是经过归一化后再应用" title="Direct link to heading">​</a></h3><p>假设有一个行走循环和一个奔跑循环，两者的权重都是 1 (100%)。当 Unity 生成最终动画时，它将对权重进行归一化，这意味着行走循环将为动画贡献 50%，而奔跑周期也将贡献 50%。</p><p>但是，在播放两段动画时，通常希望优先让其中一段动画获得最大权重。当然，可通过手动方式确保权重总和达到 100%，但这种情况下使用层会更容易。</p><h3 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="层示例">层示例<a class="hash-link" href="#层示例" title="Direct link to heading">​</a></h3><p>例如，您可能有一段射击动画、一个空闲循环和一个行走循环。行走动画和空闲动画将根据玩家的速度进行混合，但是当玩家射击时，您只想显示射击动画。因此，射击动画基本上具有更高的优先级。</p><p>最简单的做法是在射击时继续播放行走动画和空闲动画。要做到这一点，我们需要确保射击动画比空闲动画和行走动画位于更高的层，这意味着射击动画将首先接收混合权重。仅当射击动画未使用全部 100% 的混合权重时，行走动画和空闲动画才能接收权重。因此，当淡入淡出 (CrossFading) 射击动画时，权重将从零开始，并在短时间内变为 100%。在开始时，行走动画层和空闲动画层仍会接收混合权重，但当射击动画完全淡入时，这两个动画层将不再接收任何权重。这正是我们所需要的效果！</p><div class="codeBlockContainer_CBWl theme-code-block"><div class="codeBlockContent_vhl8" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_w2AC thin-scrollbar"><code class="codeBlockLines_OfWd"><span class="token-line" style="color:#393A34"><span class="token plain">function Start () {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   // 将所有动画设置为循环模式</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   animation.wrapMode = WrapMode.Loop;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   // 射击除外</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   animation[&quot;shoot&quot;].wrapMode = WrapMode.Once;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   // 将空闲动画和行走动画置于较低的层（默认层始终为 0）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   // 因此将产生两个效果</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   // - 由于射击动画和空闲/行走动画位于不同的层，因此在调用</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   // CrossFade 时，它们不会影响彼此的播放。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   // - 由于射击动画位于较高的层，因此射击动画将在淡入后</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   // 替换空闲/行走动画。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   animation[&quot;shoot&quot;].layer = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   // 停止正在播放的动画</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   //（预防用户忘记自动禁用播放）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   animation.Stop();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function Update () {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   // 根据按下的键，</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   // 播放行走动画或空闲动画</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   if (Mathf.Abs(Input.GetAxis(&quot;Vertical&quot;)) &amp;gt; 0.1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      animation.CrossFade(&quot;walk&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      animation.CrossFade(&quot;idle&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   // 射击</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   if (Input.GetButtonDown (&quot;Fire1&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      animation.CrossFade(&quot;shoot&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_R7VQ clean-btn"><span class="copyButtonIcons_Uqyx" aria-hidden="true"><svg class="copyButtonIcon_CtfL" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Mq1p" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>默认情况下， <strong>animation.Play()</strong>  和  <strong>animation.CrossFade()</strong>  将停止或淡出位于同一层的动画。在大多数情况下，这正是我们需要的效果。在我们的射击、空闲、奔跑示例中，播放空闲动画和奔跑动画不会影响射击动画，反之亦然（如果需要，可使用 animation.CrossFade 的可选参数更改此行为）。</p><h2 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="动画混组">动画混组<a class="hash-link" href="#动画混组" title="Direct link to heading">​</a></h2><p>通过动画混组 (mixing)，可将一些动画仅应用于身体的某个部位，从而减少需要为游戏创建的动画数量。这意味着此类动画可通过各种组合形式与其他动画一起使用。</p><p>通过在给定的 AnimationState 上调用  <strong>AddMixingTransform()</strong> ，可将动画混组变换添加到动画。</p><h3 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="混组示例">混组示例<a class="hash-link" href="#混组示例" title="Direct link to heading">​</a></h3><p>一个混组的示例可能是挥手之类的动画。您可能希望角色在空闲或行走时挥手。如果不使用动画混组，必须为空闲状态和行走状态创建单独的挥手动画。但是，如果将肩部变换以混组变换的形式添加到挥手动画，则挥手动画将具有从肩关节到手的完全控制权限。由于身体的其余部位不会受到挥手的影响，因此将继续播放空闲动画或行走动画。所以，只需用一段动画表现挥手，同时让身体的其余部位继续使用空闲动画或行走动画。</p><div class="codeBlockContainer_CBWl theme-code-block"><div class="codeBlockContent_vhl8" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_w2AC thin-scrollbar"><code class="codeBlockLines_OfWd"><span class="token-line" style="color:#393A34"><span class="token plain">/// 使用 Transform 变量添加混组变换</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">var shoulder : Transform;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">animation[&quot;wave_hand&quot;].AddMixingTransform(shoulder);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_R7VQ clean-btn"><span class="copyButtonIcons_Uqyx" aria-hidden="true"><svg class="copyButtonIcon_CtfL" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Mq1p" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>另一个使用路径的示例。</p><div class="codeBlockContainer_CBWl theme-code-block"><div class="codeBlockContent_vhl8" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_w2AC thin-scrollbar"><code class="codeBlockLines_OfWd"><span class="token-line" style="color:#393A34"><span class="token plain">function Start () {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   // 改用路径添加混组变换</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   var mixTransform : Transform = transform.Find(&quot;root/upper_body/left_shoulder&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   animation[&quot;wave_hand&quot;].AddMixingTransform(mixTransform);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_R7VQ clean-btn"><span class="copyButtonIcons_Uqyx" aria-hidden="true"><svg class="copyButtonIcon_CtfL" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Mq1p" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="附加动画">附加动画<a class="hash-link" href="#附加动画" title="Direct link to heading">​</a></h2><p>通过附加动画和动画混组，可将一些动画仅应用于身体的某个部位，从而减少需要为游戏创建的动画数量。</p><p>假设您希望创建一个在行走和奔跑时向侧面倾斜的角色。这导致了四种组合：walk-lean-left（向左倾斜行走）、walk-lean-right（向右倾斜行走）、run-lean-left（向左倾斜奔跑）和 run-lean-right（向右倾斜奔跑），每个组合都需要一段动画。即使在这种简单的情况下，为每个组合创建单独的动画也会导致很多额外的工作，但是每增加一个动作，组合的数量就会大大增加。幸好，附加动画和动画混组避免了为简单动作组合生成单独动画的必要。</p><h3 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="附加动画示例">附加动画示例<a class="hash-link" href="#附加动画示例" title="Direct link to heading">​</a></h3><p>使用附加动画可将一个动画的效果叠加在可能正在播放的任何其他动画之上。生成附加动画时，Unity 将计算动画剪辑中第一帧与当前帧之间的差异。然后，它将在所有其他播放的动画上应用此差异。</p><p>参考前面的示例，您可以制作使角色左右倾斜的动画，然后 Unity 可将它们叠加在行走、空闲或奔跑周期上。通过以下代码可实现这一点：</p><div class="codeBlockContainer_CBWl theme-code-block"><div class="codeBlockContent_vhl8" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_w2AC thin-scrollbar"><code class="codeBlockLines_OfWd"><span class="token-line" style="color:#393A34"><span class="token plain">private var leanLeft : AnimationState;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">private var leanRight : AnimationState;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function Start () {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   leanLeft = animation[&quot;leanLeft&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   leanRight = animation[&quot;leanRight&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   // 将倾斜动画放在单独一层中，</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   // 因此，对 CrossFade 的其他调用不会影响它。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   leanLeft.layer = 10;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   leanRight.layer = 10;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   // 将倾斜动画设置为附加动画</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   leanLeft.blendMode = AnimationBlendMode.Additive;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   leanRight.blendMode = AnimationBlendMode.Additive;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   // 设置倾斜动画 ClampForever</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   // 通过设置 ClampForever，动画</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   // 在到达剪辑结尾时不会自动停止</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   leanLeft.wrapMode = WrapMode.ClampForever;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   leanRight.wrapMode = WrapMode.ClampForever;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   // 启用动画并使其完全淡入</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   // 我们在此处不使用 animation.Play，因为我们将在 Update 函数中</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   // 手动调整时间。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   // 相反，我们仅启用动画并将其设置为全部权重</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   leanRight.enabled = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   leanLeft.enabled = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   leanRight.weight = 1.0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   leanLeft.weight = 1.0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   // 为进行测试，仅播放 &quot;walk&quot; 动画并对其进行循环</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   animation[&quot;walk&quot;].wrapMode = WrapMode.Loop;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   animation.Play(&quot;walk&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 每一帧都根据我们需要应用的</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 倾斜程度来设置标准化时间</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function Update () {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   var lean = Input.GetAxis(&quot;Horizontal&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   // 在剪辑的第一帧，normalizedTime 为 0，而最后一帧为 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   leanLeft.normalizedTime = -lean;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   leanRight.normalizedTime = lean;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_R7VQ clean-btn"><span class="copyButtonIcons_Uqyx" aria-hidden="true"><svg class="copyButtonIcon_CtfL" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Mq1p" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p> <strong>提示：</strong> 使用附加动画时，还必须在附加动画中使用的每个变换上播放其他非附加动画，否则动画将添加到最后一帧的结果上。这肯定不是您想要的效果。</p><h2 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="以程序化方法实现角色动画化">以程序化方法实现角色动画化<a class="hash-link" href="#以程序化方法实现角色动画化" title="Direct link to heading">​</a></h2><p>有时，您希望以程序化方法对角色的骨骼进行动画化。例如，可能希望角色的头部注视 3D 空间中的特定点，最好由跟踪目标点的脚本进行处理。幸运的是，Unity 很容易实现这一点，因为骨骼就是驱动蒙皮网格的变换组件。所以，可以像游戏对象的变换组件一样，通过脚本来控制角色的骨骼。</p><p>必须注意，动画系统在  <strong>Update()</strong>  函数之后和  <strong>LateUpdate()</strong>  函数之前更新变换组件。因此，如果您需要执行  <strong>LookAt()</strong>  函数，应在  <strong>LateUpdate()</strong>  中执行该函数，从而确保真正覆盖动画。</p><p>布娃娃将以同样的方式创建。只需将刚体 (Rigidbodies)、角色关节 (Character Joints) 和胶囊碰撞体 (Capsule Colliders) 连接到不同的骨骼。这样就会实际动画化您的蒙皮角色。</p><h2 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="动画播放和采样">动画播放和采样<a class="hash-link" href="#动画播放和采样" title="Direct link to heading">​</a></h2><p>本部分介绍在引擎播放 Unity 中的动画时如何对这些动画采样。</p><p>动画剪辑 (AnimationClips) 通常是以固定帧率创作的。例如，可在 Autodesk® 3ds Max® 或 Autodesk® Maya® 中创建帧率为 60 帧/秒 (fps) 的动画。在 Unity 中导入动画时，导入器将读取此帧率，因此所导入动画的数据也以 60 fps 的帧率采样。</p><p>但是，游戏通常以可变帧率运行。一些计算机上的帧率可能高于其他计算机上的帧率，而根据摄像机在任何给定时刻观看的视图复杂性，每一秒的帧率也可能不同。基本上，这意味着我们不能对游戏运行的确切帧率做出任何假设。这也就是说，即使动画是以 60 fps 创作的，也可能以不同的帧率播放动画，例如 56.72 fps 或 83.14 fps 的帧率，甚至几乎任何其他帧率值。</p><p>因此，Unity 必须以可变帧率对动画进行采样，并且不能保证最初设计的帧率。幸好，3D 计算机图形动画不是由离散帧组成的，而是由连续曲线组成。在任何时间点都可以对这些曲线进行采样，而不是局限于与原始动画中的帧相对应的时间点。事实上，如果游戏的运行帧率高于创作动画时的设计帧率，那么动画在实际游戏中看起来比在动画软件中看起来更流畅、更稳定。</p><p>在大多数实际情况下，您可以忽略 Unity 以可变帧率采样动画这件事。但是，如果游戏玩法逻辑依赖于动画的变换组件或属性到非常具体的配置，那么您需要知道重新采样过程在后台进行。例如，如果有一段动画在 30 帧内将对象从 0 度旋转到 180 度，您希望从代码中知道何时到达中间位置，此情况下不应在代码中使用条件语句（通过条件语句检查当前旋转是否为 90 度）来实现此目的。因为 Unity 根据游戏的可变帧率对动画进行采样，所以可以在旋转刚好低于 90 度时对其进行采样，而在下次到达 90 度后再进行采样。如果您需要在到达动画中的特定点时收到通知，应改用 <a href="/en/docs/animation-section/animation-clips/animation-editor-guide/script-animation-window-event">AnimationEvent</a>。</p><p>另外请注意，由于可变帧率采样的原因，使用  <strong>WrapMode.Once</strong>  模式播放的动画可能无法在最后一帧的确切时间进行采样。在游戏的一帧中，正好可在动画结束之前进行动画采样，而在下一帧中，时间可能会超过动画的长度，因此会禁用这一帧动画，不对其进一步采样。如果您必须要对动画的最后一帧采样，应使用  <strong>WrapMode.ClampForever</strong>  模式，这种模式将无限期对最后一帧进行采样，直到您主动停止动画为止。</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/danyow/danyow.github.io/edit/main/docs/unity/legacy-topics/animations/animation-scripting.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_OMbO" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vA0S"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-03-31T15:56:20.000Z">3/31/2022</time></b> by <b>danyow</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/en/docs/legacy-topics/animations/animations"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">旧版动画系统</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/en/docs/legacy-topics/animations/class-animation"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">动画</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_jWtb thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#动画混合" class="table-of-contents__link toc-highlight">动画混合</a></li><li><a href="#动画层" class="table-of-contents__link toc-highlight">动画层</a><ul><li><a href="#混合权重总是经过归一化后再应用" class="table-of-contents__link toc-highlight">混合权重总是经过归一化后再应用</a></li><li><a href="#层示例" class="table-of-contents__link toc-highlight">层示例</a></li></ul></li><li><a href="#动画混组" class="table-of-contents__link toc-highlight">动画混组</a><ul><li><a href="#混组示例" class="table-of-contents__link toc-highlight">混组示例</a></li></ul></li><li><a href="#附加动画" class="table-of-contents__link toc-highlight">附加动画</a><ul><li><a href="#附加动画示例" class="table-of-contents__link toc-highlight">附加动画示例</a></li></ul></li><li><a href="#以程序化方法实现角色动画化" class="table-of-contents__link toc-highlight">以程序化方法实现角色动画化</a></li><li><a href="#动画播放和采样" class="table-of-contents__link toc-highlight">动画播放和采样</a></li></ul></div></div></div></div></main></div></div></div>
<script src="/en/assets/js/runtime~main.8b3186ef.js"></script>
<script src="/en/assets/js/main.4cfd5153.js"></script>
</body>
</html>