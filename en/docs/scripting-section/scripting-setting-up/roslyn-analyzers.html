<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-Unity@2022.1 plugin-docs plugin-id-default docs-doc-id-unity/scripting-section/scripting-setting-up/Roslyn analyzers and source generators">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<link rel="alternate" type="application/rss+xml" href="/en/blog/rss.xml" title="Danyow RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/en/blog/atom.xml" title="Danyow Atom Feed">
<link rel="alternate" type="application/json" href="/en/blog/feed.json" title="Danyow JSON Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-141789564-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-141789564-1",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Danyow" href="/en/opensearch.xml">
<link rel="alternate" type="application/rss+xml" href="/en/changelog/rss.xml" title="日志 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/en/changelog/atom.xml" title="日志 Atom Feed">
<link rel="alternate" type="application/json" href="/en/changelog/feed.json" title="日志 JSON Feed">
<link rel="icon" href="/en/img/logo.png">
<link rel="manifest" href="/en/manifest.json">
<meta name="theme-color" content="rgb(37, 194, 160)">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">
<link rel="apple-touch-icon" href="/en/img/logo.png">
<link rel="mask-icon" href="/en/img/logo.png" color="rgb(62, 204, 94)">
<meta name="msapplication-TileImage" content="/en/img/logo.png">
<meta name="msapplication-TileColor" content="#000">
<link rel="stylesheet" href="/katex/katex.min.css"><title data-rh="true">Roslyn analyzers and source generators | Danyow</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://danyow.github.io/en/docs/scripting-section/scripting-setting-up/roslyn-analyzers"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="Unity@2022.1"><meta data-rh="true" name="docusaurus_tag" content="docs-default-Unity@2022.1"><meta data-rh="true" name="docsearch:version" content="Unity@2022.1"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-Unity@2022.1"><meta data-rh="true" property="og:title" content="Roslyn analyzers and source generators | Danyow"><meta data-rh="true" name="description" content="Use Roslyn analyzers, source generators and ruleset files in Unity projects to inspect your code for style, quality, and other issues."><meta data-rh="true" property="og:description" content="Use Roslyn analyzers, source generators and ruleset files in Unity projects to inspect your code for style, quality, and other issues."><link data-rh="true" rel="icon" href="/en/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://danyow.github.io/en/docs/scripting-section/scripting-setting-up/roslyn-analyzers"><link data-rh="true" rel="alternate" href="https://danyow.github.io/docs/scripting-section/scripting-setting-up/roslyn-analyzers" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://danyow.github.io/en/docs/scripting-section/scripting-setting-up/roslyn-analyzers" hreflang="en"><link data-rh="true" rel="alternate" href="https://danyow.github.io/docs/scripting-section/scripting-setting-up/roslyn-analyzers" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://S3KRFC060Q-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/en/assets/css/styles.bff76bc0.css">
<link rel="preload" href="/en/assets/js/runtime~main.8b3186ef.js" as="script">
<link rel="preload" href="/en/assets/js/main.4cfd5153.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_BxGa">Skip to main content</a></div><div class="announcementBar_yyVl" role="banner"><div class="announcementBarPlaceholder_Il1w"></div><div class="announcementBarContent_KFU1">⭐️ If you like, give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/danyow/danyow.github.io">GitHub</a> </div><button type="button" class="clean-btn close announcementBarClose_axA0" aria-label="Close"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top navbarHideable_FcXi"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/en/"><div class="navbar__logo"><img src="/en/img/logo.svg" alt="Danyow Logo" class="themedImage_aIr_ themedImage--light_DGIu" height="32" width="32"><img src="/en/img/logo-dark.svg" alt="Danyow Logo" class="themedImage_aIr_ themedImage--dark_RoHN" height="32" width="32"></div><b class="navbar__title">Danyow</b></a><a class="navbar__item navbar__link" href="/en/blog">博客</a><a class="navbar__item navbar__link" href="/en/changelog">日志</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/en/docs/animation-section/animation-section">Unity@2022.1</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/en/docs/next">v0 🚧</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/en/docs/scripting-section/scripting-setting-up/roslyn-analyzers">Unity@2022.1</a></li><li><a href="https://62455b8ed3daac0779429a1c--danyow.netlify.app/docs/lua/hello" target="_blank" rel="noopener noreferrer" class="dropdown__link">Lua@5.3<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_GWqj"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a class="dropdown__link" href="/en/versions">所有版本</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><span><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_NpMu"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg><span>English</span></span></a><ul class="dropdown__menu"><li><a href="/docs/scripting-section/scripting-setting-up/roslyn-analyzers" target="_self" rel="noopener noreferrer" class="dropdown__link">中文</a></li><li><a href="/en/docs/scripting-section/scripting-setting-up/roslyn-analyzers" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">English</a></li><li><a href="https://github.com/danyow/danyow.github.io/issues/3526" target="_blank" rel="noopener noreferrer" class="dropdown__link">Help Us Translate<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_GWqj"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><a href="https://github.com/danyow/danyow.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_IT2h colorModeToggle_o_qc"><button class="clean-btn toggleButton_pGki toggleButtonDisabled_vZLo" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_dYsV"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_WRF1"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_lGmL"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="docPage_zNSk"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_ecpa" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_NEdF"><div class="sidebar_Uz2u sidebarWithHideableNavbar_MFe1"><a tabindex="-1" class="sidebarLogo_iqfm" href="/en/"><img src="/en/img/logo.svg" alt="Danyow Logo" class="themedImage_aIr_ themedImage--light_DGIu" height="32" width="32"><img src="/en/img/logo-dark.svg" alt="Danyow Logo" class="themedImage_aIr_ themedImage--dark_RoHN" height="32" width="32"><b>Danyow</b></a><nav class="menu thin-scrollbar menu_XU2j menuWithAnnouncementBar_vo3y"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/animation-section/animation-section">动画</a><button aria-label="Toggle the collapsible sidebar category &#x27;动画&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/asset-store/asset-store">Unity Asset Store</a><button aria-label="Toggle the collapsible sidebar category &#x27;Unity Asset Store&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/asset-workflow/asset-workflow">资源工作流程</a><button aria-label="Toggle the collapsible sidebar category &#x27;资源工作流程&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/audio/audio">音频</a><button aria-label="Toggle the collapsible sidebar category &#x27;音频&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/creating-environments/creating-environments">World building</a><button aria-label="Toggle the collapsible sidebar category &#x27;World building&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/glossary">术语表</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/graphics/graphics">图形</a><button aria-label="Toggle the collapsible sidebar category &#x27;图形&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/input/input">输入</a><button aria-label="Toggle the collapsible sidebar category &#x27;输入&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/legacy-topics/legacy-topics">旧版主题</a><button aria-label="Toggle the collapsible sidebar category &#x27;旧版主题&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/navigation/navigation">导航和寻路</a><button aria-label="Toggle the collapsible sidebar category &#x27;导航和寻路&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/open-source-repositories/open-source-repositories">开源代码仓库</a><button aria-label="Toggle the collapsible sidebar category &#x27;开源代码仓库&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/packages-list/packages-list">Packages and feature sets</a><button aria-label="Toggle the collapsible sidebar category &#x27;Packages and feature sets&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/physics-section/physics-section">物理系统</a><button aria-label="Toggle the collapsible sidebar category &#x27;物理系统&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/platform-specific/platform-specific">平台开发</a><button aria-label="Toggle the collapsible sidebar category &#x27;平台开发&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/en/docs/scripting-section/scripting-section">脚本</a><button aria-label="Toggle the collapsible sidebar category &#x27;脚本&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/en/docs/scripting-section/job-system/job-system">C# 作业系统</a><button aria-label="Toggle the collapsible sidebar category &#x27;C# 作业系统&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/en/docs/scripting-section/plugins/plugins">Plug-ins</a><button aria-label="Toggle the collapsible sidebar category &#x27;Plug-ins&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/en/docs/scripting-section/scripting-concepts/scripting-concepts">脚本概念</a><button aria-label="Toggle the collapsible sidebar category &#x27;脚本概念&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/en/docs/scripting-section/scripting-important-classes/scripting-important-classes">重要的类</a><button aria-label="Toggle the collapsible sidebar category &#x27;重要的类&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/en/docs/scripting-section/scripting-setting-up/scripting-setting-up">设置脚本编写环境</a><button aria-label="Toggle the collapsible sidebar category &#x27;设置脚本编写环境&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/scripting-section/scripting-setting-up/managed-code-debugging">Debug C# code in Unity</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/en/docs/scripting-section/scripting-setting-up/roslyn-analyzers">Roslyn analyzers and source generators</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/scripting-section/scripting-setting-up/scripting-tools-ides">集成开发环境 (IDE) 支持</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/scripting-section/scripting-setting-up/testing-editortestsrunner">单元测试。</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/en/docs/scripting-section/unity-architecture/unity-architecture">Unity 架构</a><button aria-label="Toggle the collapsible sidebar category &#x27;Unity 架构&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/search-overview/search-overview">Unity Search</a><button aria-label="Toggle the collapsible sidebar category &#x27;Unity Search&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/uitoolkits/uitoolkits">创建用户界面 (UI)</a><button aria-label="Toggle the collapsible sidebar category &#x27;创建用户界面 (UI)&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/unet/unet">多玩家和联网</a><button aria-label="Toggle the collapsible sidebar category &#x27;多玩家和联网&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/unity-manual/unity-manual">Unity User Manual 2022.1 (beta)</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/unity-overview/unity-overview">在 Unity 中操作</a><button aria-label="Toggle the collapsible sidebar category &#x27;在 Unity 中操作&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/unity-services/unity-services">Unity 服务</a><button aria-label="Toggle the collapsible sidebar category &#x27;Unity 服务&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/unity2d/unity2d">2D</a><button aria-label="Toggle the collapsible sidebar category &#x27;2D&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/video-player/video-player">视频概述</a><button aria-label="Toggle the collapsible sidebar category &#x27;视频概述&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/xr/xr">XR</a><button aria-label="Toggle the collapsible sidebar category &#x27;XR&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_Essf"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_bqna"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_vJqy"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_ygLL"><div class="docItemContainer_yJzi"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_nmcO" aria-label="breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/en/">🏠</a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/en/docs/scripting-section/scripting-section"><span itemprop="name">脚本</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/en/docs/scripting-section/scripting-setting-up/scripting-setting-up"><span itemprop="name">设置脚本编写环境</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="item name">Roslyn analyzers and source generators</span><meta itemprop="position" content="3"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: Unity@2022.1</span><div class="tocCollapsible_aX8Q theme-doc-toc-mobile tocMobile_By44"><button type="button" class="clean-btn tocCollapsibleButton_Va7b">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Roslyn analyzers and source generators</h1><p>Use Roslyn analyzers, source generators and ruleset files in Unity projects to inspect your code for style, quality, and other issues.</p><p>You can use existing analyzer libraries to inspect your code, and write your own analyzers to promote the best practices or conventions within your organization. This page explains how to use Roslyn analyzers and source generators in an empty Unity Project.</p><p> <strong>Note</strong> : Roslyn analyzers are only compatible with the IDEs that Unity publically supports, which are Visual Studio and JetBrains Rider.</p><p>For more information about how to write and use Roslyn analyzers, see Microsoft’s <a href="https://docs.microsoft.com/en-us/visualstudio/code-quality/use-roslyn-analyzers?view=vs-2019" target="_blank" rel="noopener noreferrer">Analyzer Configuration</a> and <a href="https://docs.microsoft.com/en-us/visualstudio/extensibility/getting-started-with-roslyn-analyzers?view=vs-2019" target="_blank" rel="noopener noreferrer">Get started with Roslyn analyzers</a> documentation.</p><h2 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="source-generators">Source generators<a class="hash-link" href="#source-generators" title="Direct link to heading">​</a></h2><p>You can use source generators as an additional step in your script compilation process. You can use source generators to add new code while you compile your existing code. Like analyzers, you can use existing source generators or create your own.</p><p> <strong>Note</strong> : Unity only supports version 6.0.0-preview of the ‘System.Text.Json’ namespace. If you want to use this namespace in your application, ensure you use version 6.0.0-preview. For more information about <code>System.Text.Json</code>, see Microsoft’s <a href="https://docs.microsoft.com/en-us/dotnet/api/system.text.json?view=net-6.0" target="_blank" rel="noopener noreferrer">System.Text.Json Namespace documentation</a>.</p><p>To set up a source generator using Visual Studio:</p><ol><li>In Visual Studio, create a .NET standard library project that targets .NET Standard 2.0.</li><li>Install the Microsoft.CodeAnalysis NuGet package. Your source generator must use <a href="https://www.nuget.org/packages/Microsoft.CodeAnalysis.CSharp/3.8.0" target="_blank" rel="noopener noreferrer">Microsoft.CodeAnalysis 3.8</a> to work with Unity.</li><li>In your Visual Studio project, create a new C# file and add the following code:</li></ol><div class="codeBlockContainer_CBWl theme-code-block"><div class="codeBlockContent_vhl8" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_w2AC thin-scrollbar"><code class="codeBlockLines_OfWd"><span class="token-line" style="color:#393A34"><span class="token plain">using Microsoft.CodeAnalysis;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using Microsoft.CodeAnalysis.Text;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using System.Text;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace ExampleSourceGenerator</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [Generator]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public class ExampleSourceGenerator : ISourceGenerator</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public void Execute(GeneratorExecutionContext context)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            System.Console.WriteLine(System.DateTime.Now.ToString());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            var sourceBuilder = new StringBuilder(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            @&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            using System;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            namespace ExampleSourceGenerated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                public static class ExampleSourceGenerated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    public static string GetTestText() </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        return &quot;&quot;This is from source generator &quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            sourceBuilder.Append(System.DateTime.Now.ToString());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            sourceBuilder.Append(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                @&quot;&quot;&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            context.AddSource(&quot;exampleSourceGenerator&quot;, SourceText.From(sourceBuilder.ToString(), Encoding.UTF8));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public void Initialize(GeneratorInitializationContext context) { }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_R7VQ clean-btn"><span class="copyButtonIcons_Uqyx" aria-hidden="true"><svg class="copyButtonIcon_CtfL" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Mq1p" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><ol><li>Build your source generator for release. Tod do this, go to  <strong>Build</strong>  and select the  <strong>Batch Build</strong>  option.</li><li>In your source generator’s project folder, find the bin/Release/netstandard2.0/ExampleSourceGenerator.dll file.</li><li>Copy this file into your Unity project, inside the Assets folder.</li><li>Inside the Asset Browser, click on the .dll file to open the Plugin Inspector window.</li><li>Go to  <strong>Select platforms</strong>  for plugin and disable  <strong>Any Platform</strong> .</li><li>Go to  <strong>Include Platforms</strong>  and disable  <strong>Editor</strong>  and  <strong>Standalone</strong> .</li><li>Go to  <strong>Asset Labels</strong>  and open the  <strong>Asset Labels</strong>  sub-menu.</li><li>Create and assign a new label called  <strong>RoslynAnalyzer</strong> . To do this, enter “ <strong>RoslynAnalyzer</strong> ” into the text input window in the Asset Labels sub-menu. This label must match exactly and is case sensitive. After you create the label for the first analyzer, The label appears in the  <strong>Asset Labels</strong>  sub-menu. You can click on the name of the label in the menu to assign it to other analyzers.</li><li>To test the source generator is working, create a new C# script in the editor with the following code:</li></ol><div class="codeBlockContainer_CBWl theme-code-block"><div class="codeBlockContent_vhl8" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_w2AC thin-scrollbar"><code class="codeBlockLines_OfWd"><span class="token-line" style="color:#393A34"><span class="token plain">using UnityEngine;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class HelloFromSourceGenerator : MonoBehaviour</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    static string GetStringFromSourceGenerator()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return ExampleSourceGenerated.ExampleSourceGenerated.GetTestText();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Start is called before the first frame update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void Start()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var output = &quot;Test&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        output = GetStringFromSourceGenerator();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Debug.Log(output);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_R7VQ clean-btn"><span class="copyButtonIcons_Uqyx" aria-hidden="true"><svg class="copyButtonIcon_CtfL" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Mq1p" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><ol><li>Add this script to a GameObject in the scene and enter Play mode. You should see a message from the source generator in the Console window, including the time stamp.</li></ol><p>For more information about source generators, see Microsoft’s <a href="https://docs.microsoft.com/en-us/dotnet/csharp/roslyn-sdk/source-generators-overview" target="_blank" rel="noopener noreferrer">Source Generators documentation</a>.</p><h2 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="analyzer-scope">Analyzer scope<a class="hash-link" href="#analyzer-scope" title="Direct link to heading">​</a></h2><p>You can limit the scope of analyzers in your project by using assembly definitions, so that they only analyze certain portions of your code.</p><p>Unity applies analyzers to all assemblies in your project’s Assets folder, or in any subfolder whose parent folder doesn’t contain an <a href="/en/docs/scripting-section/unity-architecture/script-compilation/script-compilation-assembly-definition-files/script-compilation-assembly-definition-files">assembly definition file</a>. If an analyzer is in a folder that contains an assembly definition, or a subfolder of such a folder, the analyzer only applies to the assembly generated from that assembly definition, and to any other assembly that references it.</p><p>This means, for example, that a <a href="/en/docs/packages-list/packages-list">package</a> can supply analyzers that only analyze code related to the package, which can help package users to use the package API correctly.</p><h2 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="report-analyzer-diagnostics">Report analyzer diagnostics<a class="hash-link" href="#report-analyzer-diagnostics" title="Direct link to heading">​</a></h2><p>To view information such as the total execution time of your analyzers and source generators or the relative execution times of each analyzer or source generator, go to  <strong>Preferences</strong>  <!-- -->&gt;<!-- -->  <strong>Diagnostic Switches</strong>  and enable  <strong>EnableDomainReloadTimings</strong> . When enabled, the information is displayed in the console window.</p><h2 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="installing-an-existing-roslyn-analyzer-or-source-generator">Installing an existing Roslyn analyzer or source generator<a class="hash-link" href="#installing-an-existing-roslyn-analyzer-or-source-generator" title="Direct link to heading">​</a></h2><p>Unity doesn’t support the installation of Roslyn Analyzers or source generators through NuGet directly. The below example uses the <a href="https://www.nuget.org/packages/ErrorProne.NET.CoreAnalyzers/" target="_blank" rel="noopener noreferrer">ErrorProne.NET.CoreAnalyzers</a> library to demonstrate how to install Roslyn Analyzers and source generators from NuGet:</p><ol><li>Download the library as a .zip file with the  <strong>Download package</strong>  button.</li><li>Extract the contents of the .zip file.</li><li>Inside the extracted folder, locate the .dll files that contain the analyzers. In this example, navigate to  <strong><code>errorprone.net.coreanalyzers&amp;lt;version-number&amp;gt;\analyzers\dotnet\cd</code></strong> . The required files should be in this folder, named <code>ErrorProne.NET.Core.dll</code>, <code>ErrorProne.Net.CoreAnalyzers.dll</code>, and <code>RuntimeContracts.dll</code>.</li><li>Move these files into the Assets folder, or any folder nested inside of the Assets folder, in your Unity project. To do this, either go to  <strong>Assets</strong>  <!-- -->&gt;<!-- -->  <strong>Import new asset</strong>  and select the .dll for each of the three files, or copy them into your project’s Assets folder through your device’s file browser.</li><li>Click on the .dll file inside the  <strong>Asset Browser</strong>  inside Unity to open the  <strong><a href="/en/docs/scripting-section/plugins/plugin-inspector">Plugin Inspector</a></strong>  window.</li><li>Inside the Plugin Inspector window:<ul><li>Under the  <strong>Select platforms for plugin</strong>  heading, disable  <strong>Any Platform</strong> .</li><li>Under the  <strong>Include Platforms</strong>  heading, disable  <strong>Editor</strong>  and  <strong>Standalone</strong> .</li></ul></li><li>Under the  <strong>Asset Labels</strong>  heading in the Plugin Inspector window, click on the blue label icon to open the  <strong>Asset Labels</strong>  sub-menu.</li><li>Create and assign a new label called RoslynAnalyzer. To do this, type “RoslynAnalyzer” into the text input window in the  <strong>Asset Labels</strong>  sub-menu and press  <strong>Return</strong> . This label must exactly match the example and is case sensitive. After you create the label for the first analyzer, it appears on the list of available labels in the  <strong>Asset Labels</strong>  sub-menu. You can click on the name of the label in the menu to assign it to other analyzers.</li></ol><p>Unity recognizes the RoslynAnalyzer label and treats assets with this label as Roslyn Analyzers or source generators. When you assign the label to an analyzer, Unity recompiles scripts within the scope of the analyzer and analyzes the code in those scripts according to the rules in the analyzer. Any scripts that are within the same assembly definition as an analyzer are in that analyzer’s scope. For analyzers in the root level of the Assets folder, Unity considers all files in the project to be in scope. For more information about scope, see <a href="#analyzer-scope">Analyzer scope</a> above.</p><p>To test that your analyzers work correctly, follow the example below. If you have installed the analyzers correctly, the ErrorProne.NET analyzer raises warnings when it analyzes the code in the example.</p><p>Create a new script file named <code>RethrowError.cs</code>. Copy the following code into this script and save the file:</p><div class="codeBlockContainer_CBWl theme-code-block"><div class="codeBlockContent_vhl8" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_w2AC thin-scrollbar"><code class="codeBlockLines_OfWd"><span class="token-line" style="color:#393A34"><span class="token plain">using System;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using UnityEngine;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class RethrowError : MonoBehaviour</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void Update()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        try</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            DoSomethingInteresting();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        catch (Exception e)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Debug.Log(e.Message);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            throw e;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void DoSomethingInteresting()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        throw new System.NotImplementedException();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_R7VQ clean-btn"><span class="copyButtonIcons_Uqyx" aria-hidden="true"><svg class="copyButtonIcon_CtfL" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Mq1p" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>When you save the file, Unity recompiles the script and runs any applicable analyzers on the script’s code. When the ErrorProne.NET analyzer is correctly installed, it raises the following warnings in the Console window about the above code:</p><p><code>Assets\RethrowError.cs(14,23): warning EPC12: Suspicious exception handling: only e.Message is observed in exception block.</code></p><p><code>Assets\RethrowError.cs(15,19): warning ERP021: Incorrect exception propagation. Use throw; instead.</code></p><h2 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="规则集文件">规则集文件<a class="hash-link" href="#规则集文件" title="Direct link to heading">​</a></h2><p>To define your own rules on how to handle the various warnings and errors that the analyzers in your project raise, you can create a ruleset file. For more information on how to create a custom ruleset, see Microsoft’s Visual Studio documentation on <a href="https://docs.microsoft.com/en-us/visualstudio/code-quality/how-to-create-a-custom-rule-set?view=vs-2019" target="_blank" rel="noopener noreferrer">how to create a custom rule set</a>.</p><p>In the Assets root folder, place a ruleset file named Default.ruleset. The rules you define in Default.ruleset apply to all predefined assemblies (for example <code>Assembly-CSharp.dll</code>), and all assemblies that are built using .asmdef files.</p><p>To override the rules in Default.ruleset for a predefined assembly, create a .ruleset file in the root folder with the name <code>[PredefinedAssemblyName].ruleset</code>. For example, the rules in <code>Assembly-CSharp.ruleset</code> apply to the code in <code>Assembly-CSharp.dll</code>. Only these .ruleset files are allowed inside the root folder:</p><ul><li><code>Default.ruleset</code></li><li><code>Assembly-CSharp.ruleset</code></li><li><code>Assembly-CSharp-firstpass.ruleset</code></li><li><code>Assembly-CSharp-Editor.ruleset</code></li><li><code>Assembly-CSharp-Editor-firstpass.ruleset</code></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="工作流程在-unity-中测试规则集文件">工作流程：在 Unity 中测试规则集文件<a class="hash-link" href="#工作流程在-unity-中测试规则集文件" title="Direct link to heading">​</a></h3><p>要在 Unity 中测试规则集文件，请执行以下步骤：</p><h4 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="步骤-1设置规则集文件">步骤 1：设置规则集文件<a class="hash-link" href="#步骤-1设置规则集文件" title="Direct link to heading">​</a></h4><ol><li>Create a subfolder named “Subfolder” inside your project’s Assets folder.</li><li>Inside  <strong>Subfolder</strong> :<ol><li>Create a new .asmdef file.</li><li>Save a duplicate copy of <code>RethrowError.cs</code>.</li></ol></li><li>Create a Default.ruleset file inside  <strong>Assets</strong>  with the following code:</li></ol><div class="codeBlockContainer_CBWl theme-code-block"><div class="codeBlockContent_vhl8" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_w2AC thin-scrollbar"><code class="codeBlockLines_OfWd"><span class="token-line" style="color:#393A34"><span class="token plain">&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&amp;lt;RuleSet Name=&quot;New Rule Set&quot; Description=&quot; &quot; ToolsVersion=&quot;10.0&quot;&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &amp;lt;Rules AnalyzerId=&quot;ErrorProne.NET.CodeAnalyzers&quot; RuleNamespace=&quot;ErrorProne.NET.CodeAnalyzers&quot;&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &amp;lt;Rule Id=&quot;ERP021&quot; Action=&quot;Error&quot; /&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &amp;lt;Rule Id=&quot;EPC12&quot; Action=&quot;None&quot; /&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &amp;lt;/Rules&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&amp;lt;/RuleSet&amp;gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_R7VQ clean-btn"><span class="copyButtonIcons_Uqyx" aria-hidden="true"><svg class="copyButtonIcon_CtfL" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Mq1p" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><code>Default.ruleset</code> 文件定义了以下规则：</p><ul><li>Suppress EPC12, the warning about suspicious exception handling.</li><li>Elevate ERP021, the warning about incorrect exception propagation, to an error.</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="第-2-步重新加载项目">第 2 步：重新加载项目<a class="hash-link" href="#第-2-步重新加载项目" title="Direct link to heading">​</a></h4><p>After you add the ruleset files to your project, reimport any script that lives in an assembly where the rules should apply. This forces Unity to recompile the assembly using the new ruleset files. After recompilation, you should see two messages in the Console window:</p><p><code>Assets\Subfolder\RethrowError.cs(15,19): error ERP021: Incorrect exception propagation. Use throw; instead.</code></p><p><code>Assets\RethrowError.cs(15,19): error ERP021: Incorrect exception propagation. Use throw; instead.</code></p><p>Notice that Unity applies the rules defined in Default.ruleset to both <code>Assets/RethrowError.cs</code> and <code>Assets/Subfolder/RethrowError.cs</code>.</p><h4 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="第-3-步添加自定义规则集">第 3 步：添加自定义规则集<a class="hash-link" href="#第-3-步添加自定义规则集" title="Direct link to heading">​</a></h4><p>In Assets/Subfolder, create a .ruleset file, and give it any name you like (in this <code>exampleHello.ruleset</code>):</p><div class="codeBlockContainer_CBWl theme-code-block"><div class="codeBlockContent_vhl8" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_w2AC thin-scrollbar"><code class="codeBlockLines_OfWd"><span class="token-line" style="color:#393A34"><span class="token plain">&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&amp;lt;RuleSet Name=&quot;New Rule Set&quot; Description=&quot; &quot; ToolsVersion=&quot;10.0&quot;&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &amp;lt;Rules AnalyzerId=&quot;ErrorProne.NET.CodeAnalyzers&quot; RuleNamespace=&quot;ErrorProne.NET.CodeAnalyzers&quot;&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &amp;lt;Rule Id=&quot;ERP021&quot; Action=&quot;Info&quot; /&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &amp;lt;Rule Id=&quot;EPC12&quot; Action=&quot;Info&quot; /&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &amp;lt;/Rules&amp;gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&amp;lt;/RuleSet&amp;gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_R7VQ clean-btn"><span class="copyButtonIcons_Uqyx" aria-hidden="true"><svg class="copyButtonIcon_CtfL" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Mq1p" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>This new <code>Hello.ruleset</code> file tells Unity to print both EPC12 and ERP021 to the Console, without treating them as warnings or errors.</p><p>Unity 再次编译项目后，您会在 Console 窗口中看到以下消息：</p><p><code>Assets\Subfolder\RethrowError.cs(14,23): info EPC12: Suspicious exception handling: only e.Message is observed in exception block.</code></p><p><code>Assets\Subfolder\RethrowError.cs(15,19): info ERP021: Incorrect exception propagation. Use throw; instead.</code></p><p><code>Assets\RethrowError.cs(15,19): error ERP021: Incorrect exception propagation. Use throw; instead.</code></p><p><code>Default.ruleset</code> 中的规则仍然应用于 <code>Assets\RethrowError.cs</code>，但它们不再应用于 <code>Assets\Subfolder\RethrowError.cs</code>，因为 <code>Hello.ruleset</code> 中的规则将其覆盖。</p><p>有关所有允许的规则集操作文件的更多信息，请参阅 Visual Studio 文档<a href="https://docs.microsoft.com/en-us/visualstudio/code-quality/working-in-the-code-analysis-rule-set-editor?view=vs-2019" target="_blank" rel="noopener noreferrer">使用代码分析规则集编辑器</a>。</p><h2 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="更多分析器">更多分析器<a class="hash-link" href="#更多分析器" title="Direct link to heading">​</a></h2><p>以下是指向其他流行 Roslyn 分析器库的 Github 存储库的链接：</p><ul><li><a href="https://github.com/Cybermaxs/awesome-analyzers" target="_blank" rel="noopener noreferrer">awesome-analyzers</a></li><li><a href="https://github.com/dotnet/roslyn-analyzers" target="_blank" rel="noopener noreferrer">dotnet/roslyn-analyzers</a></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/danyow/danyow.github.io/edit/main/docs/unity/scripting-section/scripting-setting-up/roslyn-analyzers.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_OMbO" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vA0S"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-03-31T15:56:20.000Z">3/31/2022</time></b> by <b>danyow</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/en/docs/scripting-section/scripting-setting-up/managed-code-debugging"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Debug C# code in Unity</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/en/docs/scripting-section/scripting-setting-up/scripting-tools-ides"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">集成开发环境 (IDE) 支持</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_jWtb thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#source-generators" class="table-of-contents__link toc-highlight">Source generators</a></li><li><a href="#analyzer-scope" class="table-of-contents__link toc-highlight">Analyzer scope</a></li><li><a href="#report-analyzer-diagnostics" class="table-of-contents__link toc-highlight">Report analyzer diagnostics</a></li><li><a href="#installing-an-existing-roslyn-analyzer-or-source-generator" class="table-of-contents__link toc-highlight">Installing an existing Roslyn analyzer or source generator</a></li><li><a href="#规则集文件" class="table-of-contents__link toc-highlight">规则集文件</a><ul><li><a href="#工作流程在-unity-中测试规则集文件" class="table-of-contents__link toc-highlight">工作流程：在 Unity 中测试规则集文件</a></li></ul></li><li><a href="#更多分析器" class="table-of-contents__link toc-highlight">更多分析器</a></li></ul></div></div></div></div></main></div></div></div>
<script src="/en/assets/js/runtime~main.8b3186ef.js"></script>
<script src="/en/assets/js/main.4cfd5153.js"></script>
</body>
</html>