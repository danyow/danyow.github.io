<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-Unity@2022.1 plugin-docs plugin-id-default docs-doc-id-unity/graphics/shaders/shader-writing/sl-surface-shaders/编写表面着色器">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<link rel="alternate" type="application/rss+xml" href="/en/blog/rss.xml" title="Danyow RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/en/blog/atom.xml" title="Danyow Atom Feed">
<link rel="alternate" type="application/json" href="/en/blog/feed.json" title="Danyow JSON Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-141789564-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-141789564-1",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Danyow" href="/en/opensearch.xml">
<link rel="alternate" type="application/rss+xml" href="/en/changelog/rss.xml" title="日志 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/en/changelog/atom.xml" title="日志 Atom Feed">
<link rel="alternate" type="application/json" href="/en/changelog/feed.json" title="日志 JSON Feed">
<link rel="icon" href="/en/img/logo.png">
<link rel="manifest" href="/en/manifest.json">
<meta name="theme-color" content="rgb(37, 194, 160)">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">
<link rel="apple-touch-icon" href="/en/img/logo.png">
<link rel="mask-icon" href="/en/img/logo.png" color="rgb(62, 204, 94)">
<meta name="msapplication-TileImage" content="/en/img/logo.png">
<meta name="msapplication-TileColor" content="#000">
<link rel="stylesheet" href="/katex/katex.min.css"><title data-rh="true">编写表面着色器 | Danyow</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://danyow.github.io/en/docs/graphics/shaders/shader-writing/sl-surface-shaders/sl-surface-shaders"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="Unity@2022.1"><meta data-rh="true" name="docusaurus_tag" content="docs-default-Unity@2022.1"><meta data-rh="true" name="docsearch:version" content="Unity@2022.1"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-Unity@2022.1"><meta data-rh="true" property="og:title" content="编写表面着色器 | Danyow"><meta data-rh="true" name="description" content="在内置渲染管线中，表面着色器是编写与光照交互的着色器的一种简化方式。"><meta data-rh="true" property="og:description" content="在内置渲染管线中，表面着色器是编写与光照交互的着色器的一种简化方式。"><link data-rh="true" rel="icon" href="/en/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://danyow.github.io/en/docs/graphics/shaders/shader-writing/sl-surface-shaders/sl-surface-shaders"><link data-rh="true" rel="alternate" href="https://danyow.github.io/docs/graphics/shaders/shader-writing/sl-surface-shaders/sl-surface-shaders" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://danyow.github.io/en/docs/graphics/shaders/shader-writing/sl-surface-shaders/sl-surface-shaders" hreflang="en"><link data-rh="true" rel="alternate" href="https://danyow.github.io/docs/graphics/shaders/shader-writing/sl-surface-shaders/sl-surface-shaders" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://S3KRFC060Q-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/en/assets/css/styles.bff76bc0.css">
<link rel="preload" href="/en/assets/js/runtime~main.8b3186ef.js" as="script">
<link rel="preload" href="/en/assets/js/main.4cfd5153.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_BxGa">Skip to main content</a></div><div class="announcementBar_yyVl" role="banner"><div class="announcementBarPlaceholder_Il1w"></div><div class="announcementBarContent_KFU1">⭐️ If you like, give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/danyow/danyow.github.io">GitHub</a> </div><button type="button" class="clean-btn close announcementBarClose_axA0" aria-label="Close"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top navbarHideable_FcXi"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/en/"><div class="navbar__logo"><img src="/en/img/logo.svg" alt="Danyow Logo" class="themedImage_aIr_ themedImage--light_DGIu" height="32" width="32"><img src="/en/img/logo-dark.svg" alt="Danyow Logo" class="themedImage_aIr_ themedImage--dark_RoHN" height="32" width="32"></div><b class="navbar__title">Danyow</b></a><a class="navbar__item navbar__link" href="/en/blog">博客</a><a class="navbar__item navbar__link" href="/en/changelog">日志</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/en/docs/animation-section/animation-section">Unity@2022.1</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/en/docs/next">v0 🚧</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/en/docs/graphics/shaders/shader-writing/sl-surface-shaders/sl-surface-shaders">Unity@2022.1</a></li><li><a href="https://62455b8ed3daac0779429a1c--danyow.netlify.app/docs/lua/hello" target="_blank" rel="noopener noreferrer" class="dropdown__link">Lua@5.3<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_GWqj"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a class="dropdown__link" href="/en/versions">所有版本</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><span><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_NpMu"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg><span>English</span></span></a><ul class="dropdown__menu"><li><a href="/docs/graphics/shaders/shader-writing/sl-surface-shaders/sl-surface-shaders" target="_self" rel="noopener noreferrer" class="dropdown__link">中文</a></li><li><a href="/en/docs/graphics/shaders/shader-writing/sl-surface-shaders/sl-surface-shaders" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">English</a></li><li><a href="https://github.com/danyow/danyow.github.io/issues/3526" target="_blank" rel="noopener noreferrer" class="dropdown__link">Help Us Translate<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_GWqj"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><a href="https://github.com/danyow/danyow.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_IT2h colorModeToggle_o_qc"><button class="clean-btn toggleButton_pGki toggleButtonDisabled_vZLo" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_dYsV"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_WRF1"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_lGmL"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="docPage_zNSk"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_ecpa" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_NEdF"><div class="sidebar_Uz2u sidebarWithHideableNavbar_MFe1"><a tabindex="-1" class="sidebarLogo_iqfm" href="/en/"><img src="/en/img/logo.svg" alt="Danyow Logo" class="themedImage_aIr_ themedImage--light_DGIu" height="32" width="32"><img src="/en/img/logo-dark.svg" alt="Danyow Logo" class="themedImage_aIr_ themedImage--dark_RoHN" height="32" width="32"><b>Danyow</b></a><nav class="menu thin-scrollbar menu_XU2j menuWithAnnouncementBar_vo3y"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/animation-section/animation-section">动画</a><button aria-label="Toggle the collapsible sidebar category &#x27;动画&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/asset-store/asset-store">Unity Asset Store</a><button aria-label="Toggle the collapsible sidebar category &#x27;Unity Asset Store&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/asset-workflow/asset-workflow">资源工作流程</a><button aria-label="Toggle the collapsible sidebar category &#x27;资源工作流程&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/audio/audio">音频</a><button aria-label="Toggle the collapsible sidebar category &#x27;音频&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/creating-environments/creating-environments">World building</a><button aria-label="Toggle the collapsible sidebar category &#x27;World building&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/glossary">术语表</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/en/docs/graphics/graphics">图形</a><button aria-label="Toggle the collapsible sidebar category &#x27;图形&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/en/docs/graphics/cameras-overview/cameras-overview">摄像机</a><button aria-label="Toggle the collapsible sidebar category &#x27;摄像机&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/en/docs/graphics/graphics-apis/graphics-apis">图形 API 支持</a><button aria-label="Toggle the collapsible sidebar category &#x27;图形 API 支持&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/en/docs/graphics/graphics-color/graphics-color">颜色</a><button aria-label="Toggle the collapsible sidebar category &#x27;颜色&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/en/docs/graphics/graphics-performance-profiling/graphics-performance-profiling">Graphics performance and profiling</a><button aria-label="Toggle the collapsible sidebar category &#x27;Graphics performance and profiling&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/en/docs/graphics/lighting-overview/lighting-overview">光照</a><button aria-label="Toggle the collapsible sidebar category &#x27;光照&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/en/docs/graphics/materials/materials">材质</a><button aria-label="Toggle the collapsible sidebar category &#x27;材质&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/en/docs/graphics/mesh/mesh">网格</a><button aria-label="Toggle the collapsible sidebar category &#x27;网格&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/en/docs/graphics/models/models">模型</a><button aria-label="Toggle the collapsible sidebar category &#x27;模型&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/en/docs/graphics/render-pipelines/render-pipelines">渲染管线</a><button aria-label="Toggle the collapsible sidebar category &#x27;渲染管线&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/en/docs/graphics/shaders/shaders">着色器</a><button aria-label="Toggle the collapsible sidebar category &#x27;着色器&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/en/docs/graphics/shaders/shader-built-in/shader-built-in">内置着色器</a><button aria-label="Toggle the collapsible sidebar category &#x27;内置着色器&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/graphics/shaders/shader-graph">使用 Shader Graph</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/en/docs/graphics/shaders/shader-performance-debugging/shader-performance-debugging">Understanding shader performance</a><button aria-label="Toggle the collapsible sidebar category &#x27;Understanding shader performance&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/en/docs/graphics/shaders/shader-writing/shader-writing">编写着色器</a><button aria-label="Toggle the collapsible sidebar category &#x27;编写着色器&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/graphics/shaders/shader-writing/shader-writing-vertex-fragment">着色器示例</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/graphics/shaders/shader-writing/sl-glslshader-programs">Unity 中的 GLSL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/graphics/shaders/shader-writing/sl-platform-differences">为不同的图形 API 编写着色器</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/en/docs/graphics/shaders/shader-writing/sl-reference/sl-reference">ShaderLab</a><button aria-label="Toggle the collapsible sidebar category &#x27;ShaderLab&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/en/docs/graphics/shaders/shader-writing/sl-shader-programs/sl-shader-programs">Unity 中的 HLSL</a><button aria-label="Toggle the collapsible sidebar category &#x27;Unity 中的 HLSL&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/graphics/shaders/shader-writing/sl-shading-language">编写着色器概述</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item"><div class="menu__list-item-collapsible menu__list-item-collapsible--active"><a class="menu__link menu__link--sublist menu__link--active" aria-current="page" aria-expanded="true" tabindex="0" href="/en/docs/graphics/shaders/shader-writing/sl-surface-shaders/sl-surface-shaders">编写表面着色器</a><button aria-label="Toggle the collapsible sidebar category &#x27;编写表面着色器&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/graphics/shaders/shader-writing/sl-surface-shaders/sl-render-pipeline">表面着色器和渲染路径</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/graphics/shaders/shader-writing/sl-surface-shaders/sl-surface-shader-examples">表面着色器示例</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/graphics/shaders/shader-writing/sl-surface-shaders/sl-surface-shader-lighting-examples">表面着色器光照示例</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/graphics/shaders/shader-writing/sl-surface-shaders/sl-surface-shader-lighting">表面着色器中的自定义光照模型</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/graphics/shaders/shader-writing/sl-surface-shaders/sl-surface-shader-tessellation">支持 DX11/OpenGL Core 曲面细分的表面着色器</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/en/docs/graphics/shaders/shaders-overview/shaders-overview">着色器核心概念</a><button aria-label="Toggle the collapsible sidebar category &#x27;着色器核心概念&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/en/docs/graphics/sky/sky">天空</a><button aria-label="Toggle the collapsible sidebar category &#x27;天空&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/en/docs/graphics/textures/textures">纹理</a><button aria-label="Toggle the collapsible sidebar category &#x27;纹理&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/en/docs/graphics/visual-effects/visual-effects">Visual effects</a><button aria-label="Toggle the collapsible sidebar category &#x27;Visual effects&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/input/input">输入</a><button aria-label="Toggle the collapsible sidebar category &#x27;输入&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/legacy-topics/legacy-topics">旧版主题</a><button aria-label="Toggle the collapsible sidebar category &#x27;旧版主题&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/navigation/navigation">导航和寻路</a><button aria-label="Toggle the collapsible sidebar category &#x27;导航和寻路&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/open-source-repositories/open-source-repositories">开源代码仓库</a><button aria-label="Toggle the collapsible sidebar category &#x27;开源代码仓库&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/packages-list/packages-list">Packages and feature sets</a><button aria-label="Toggle the collapsible sidebar category &#x27;Packages and feature sets&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/physics-section/physics-section">物理系统</a><button aria-label="Toggle the collapsible sidebar category &#x27;物理系统&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/platform-specific/platform-specific">平台开发</a><button aria-label="Toggle the collapsible sidebar category &#x27;平台开发&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/scripting-section/scripting-section">脚本</a><button aria-label="Toggle the collapsible sidebar category &#x27;脚本&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/search-overview/search-overview">Unity Search</a><button aria-label="Toggle the collapsible sidebar category &#x27;Unity Search&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/uitoolkits/uitoolkits">创建用户界面 (UI)</a><button aria-label="Toggle the collapsible sidebar category &#x27;创建用户界面 (UI)&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/unet/unet">多玩家和联网</a><button aria-label="Toggle the collapsible sidebar category &#x27;多玩家和联网&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/unity-manual/unity-manual">Unity User Manual 2022.1 (beta)</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/unity-overview/unity-overview">在 Unity 中操作</a><button aria-label="Toggle the collapsible sidebar category &#x27;在 Unity 中操作&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/unity-services/unity-services">Unity 服务</a><button aria-label="Toggle the collapsible sidebar category &#x27;Unity 服务&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/unity2d/unity2d">2D</a><button aria-label="Toggle the collapsible sidebar category &#x27;2D&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/video-player/video-player">视频概述</a><button aria-label="Toggle the collapsible sidebar category &#x27;视频概述&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/en/docs/xr/xr">XR</a><button aria-label="Toggle the collapsible sidebar category &#x27;XR&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_Essf"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_bqna"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_vJqy"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_ygLL"><div class="docItemContainer_yJzi"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_nmcO" aria-label="breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/en/">🏠</a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/en/docs/graphics/graphics"><span itemprop="name">图形</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/en/docs/graphics/shaders/shaders"><span itemprop="name">着色器</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/en/docs/graphics/shaders/shader-writing/shader-writing"><span itemprop="name">编写着色器</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="item name">编写表面着色器</span><meta itemprop="position" content="4"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: Unity@2022.1</span><div class="tocCollapsible_aX8Q theme-doc-toc-mobile tocMobile_By44"><button type="button" class="clean-btn tocCollapsibleButton_Va7b">On this page</button></div><div class="theme-doc-markdown markdown"><h1>编写表面着色器</h1><p>在内置渲染管线中，表面着色器是编写与光照交互的着色器的一种简化方式。</p><h2 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="渲染管线兼容性">渲染管线兼容性<a class="hash-link" href="#渲染管线兼容性" title="Direct link to heading">​</a></h2><table><thead><tr><th><strong>功能名称</strong></th><th><strong>内置渲染管线</strong></th><th><strong>通用渲染管线 (URP)</strong></th><th><strong>高清渲染管线 (HDRP)</strong></th><th><strong>自定义 SRP</strong></th></tr></thead><tbody><tr><td><strong>表面着色器</strong></td><td>是</td><td>否<br><br>有关在 URP 中创建 Shader 对象的简化方法，请参阅 <a href="/en/docs/graphics/shaders/shader-graph">Shader Graph</a>。</td><td>否<br><br>有关在 HDRP 中创建 Shader 对象的简化方法，请参阅 <a href="/en/docs/graphics/shaders/shader-graph">Shader Graph</a>。</td><td>否</td></tr></tbody></table><h2 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="概述">概述<a class="hash-link" href="#概述" title="Direct link to heading">​</a></h2><p>编写与光照交互的着色器非常复杂。有不同的光源类型，不同的阴影选项，不同的渲染路径（前向和延迟渲染）；着色器应该以某种方式应对所有这些复杂性。</p><p>表面着色器是一种代码生成方法，与使用低级<a href="/en/docs/graphics/shaders/shader-writing/sl-shader-programs/sl-shader-programs">顶点/像素着色器程序</a>相比，可以更轻松地编写光照着色器。</p><p>如需了解示例，请查看<a href="/en/docs/graphics/shaders/shader-writing/sl-surface-shaders/sl-surface-shader-examples">表面着色器示例</a>和<a href="/en/docs/graphics/shaders/shader-writing/sl-surface-shaders/sl-surface-shader-lighting-examples">表面着色器自定义光照示例</a>。</p><h2 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="工作原理">工作原理<a class="hash-link" href="#工作原理" title="Direct link to heading">​</a></h2><p>您可以定义一个“表面函数”，它将您需要的所有 UV 或数据作为输入，并填充输出结构 <code>SurfaceOutput</code>。SurfaceOutput 基本上描述了<!-- -->_<!-- -->表面的属性<!-- -->_<!-- -->（反照率颜色、法线、发光、镜面反射等）。您需要使用 HLSL 编写此代码。</p><p>表面着色器编译器随后计算出需要的输入、填充的输出等等，并生成实际的<a href="/en/docs/graphics/shaders/shader-writing/sl-shader-programs/sl-shader-programs">顶点和像素着色器</a>以及渲染通道来处理前向和延迟渲染。</p><p>以下是表面着色器的标准输出结构：</p><div class="codeBlockContainer_CBWl theme-code-block"><div class="codeBlockContent_vhl8" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_w2AC thin-scrollbar"><code class="codeBlockLines_OfWd"><span class="token-line" style="color:#393A34"><span class="token plain">struct SurfaceOutput</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fixed3 Albedo;  // 漫射颜色</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fixed3 Normal;  // 切线空间法线（如果已写入）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fixed3 Emission;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    half Specular;  // 0..1 范围内的镜面反射能力</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fixed Gloss;    // 镜面反射强度</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fixed Alpha;    // 透明度 Alpha</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_R7VQ clean-btn"><span class="copyButtonIcons_Uqyx" aria-hidden="true"><svg class="copyButtonIcon_CtfL" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Mq1p" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>在 Unity 5 中，表面着色器还可以使用基于物理的光照模型。内置标准光照模型和标准镜面反射光照模型（见下文）分别使用以下输出结构：</p><div class="codeBlockContainer_CBWl theme-code-block"><div class="codeBlockContent_vhl8" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_w2AC thin-scrollbar"><code class="codeBlockLines_OfWd"><span class="token-line" style="color:#393A34"><span class="token plain">struct SurfaceOutputStandard</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fixed3 Albedo;      // 基础（漫射或镜面反射）颜色</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fixed3 Normal;      // 切线空间法线（如果已写入）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    half3 Emission;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    half Metallic;      // 0=非金属，1=金属</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    half Smoothness;    // 0=粗糙，1=平滑</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    half Occlusion;     // 遮挡（默认为 1）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fixed Alpha;        // 透明度 Alpha</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">struct SurfaceOutputStandardSpecular</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fixed3 Albedo;      // 漫射颜色</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fixed3 Specular;    // 镜面反射颜色</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fixed3 Normal;      // 切线空间法线（如果已写入）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    half3 Emission;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    half Smoothness;    // 0=粗糙，1=平滑</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    half Occlusion;     // 遮挡（默认为 1）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fixed Alpha;        // 透明度 Alpha</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_R7VQ clean-btn"><span class="copyButtonIcons_Uqyx" aria-hidden="true"><svg class="copyButtonIcon_CtfL" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Mq1p" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="示例">示例<a class="hash-link" href="#示例" title="Direct link to heading">​</a></h2><p>请参阅<a href="/en/docs/graphics/shaders/shader-writing/sl-surface-shaders/sl-surface-shader-examples">表面着色器示例</a>、<a href="/en/docs/graphics/shaders/shader-writing/sl-surface-shaders/sl-surface-shader-lighting-examples">表面着色器自定义光照示例</a>和<a href="/en/docs/graphics/shaders/shader-writing/sl-surface-shaders/sl-surface-shader-tessellation">表面着色器曲面细分</a>页面。</p><h2 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="表面着色器编译指令">表面着色器编译指令<a class="hash-link" href="#表面着色器编译指令" title="Direct link to heading">​</a></h2><p>就像任何其他着色器一样，表面着色器放置在 <code>CGPROGRAM..ENDCG</code> 代码块内。不同之处在于：</p><ul><li>它必须放在 <a href="/en/docs/graphics/shaders/shader-writing/sl-reference/sl-sub-shader/sl-sub-shader">SubShader</a> 代码块内，不能在 <a href="/en/docs/graphics/shaders/shader-writing/sl-reference/sl-pass/sl-pass">Pass</a> 内。表面着色器本身将编译为多个通道。</li><li>它使用 <code>#pragma surface ...</code> 指令来指示自己是表面着色器。</li></ul><p><code>#pragma surface</code> 指令为：</p><div class="codeBlockContainer_CBWl theme-code-block"><div class="codeBlockContent_vhl8" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_w2AC thin-scrollbar"><code class="codeBlockLines_OfWd"><span class="token-line" style="color:#393A34"><span class="token plain"># pragma surface surfaceFunction lightModel [optionalparams]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_R7VQ clean-btn"><span class="copyButtonIcons_Uqyx" aria-hidden="true"><svg class="copyButtonIcon_CtfL" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Mq1p" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="必需参数">必需参数<a class="hash-link" href="#必需参数" title="Direct link to heading">​</a></h3><ul><li><code>surfaceFunction</code> - 具有表面着色器代码的 Cg 函数。该函数的格式应为 <code>void surf (Input IN, inout SurfaceOutput o)</code>，其中 Input 是您定义的结构。Input 应包含表面函数所需的任何纹理坐标和额外自动变量。</li><li><code>lightModel</code> - 要使用的光照模型。内置光照模型是基于物理的 <code>Standard</code> 和 <code>StandardSpecular</code>，以及简单的非基于物理的 <code>Lambert</code>（漫射）和 <code>BlinnPhong</code>（镜面反射）。请参阅<a href="/en/docs/graphics/shaders/shader-writing/sl-surface-shaders/sl-surface-shader-lighting">自定义光照模型</a>页面以了解如何编写自己的光照模型。<ul><li><code>Standard</code> 光照模型使用 <code>SurfaceOutputStandard</code> 输出结构，并与 Unity 中的标准（金属性工作流）着色器匹配。</li><li><code>StandardSpecular</code> 光照模型使用 <code>SurfaceOutputStandardSpecular</code> 输出结构，并与 Unity 中的标准（镜面反射设置）着色器匹配。</li><li><code>Lambert</code> 和 <code>BlinnPhong</code> 光照模型不是基于物理的（来自 Unity 4.x），但使用这两个光照模型的着色器在低端硬件上可以提高渲染速度。</li></ul></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="可选参数">可选参数<a class="hash-link" href="#可选参数" title="Direct link to heading">​</a></h3><p> <strong>透明度和 Alpha 测试</strong> 由 <code>alpha</code> 和 <code>alphatest</code> 指令控制。透明度通常可以有两种：传统的 Alpha 混合（用于淡出对象）或更符合物理规律的“预乘混合”（允许半透明表面保留适当的镜面反射）。启用半透明度会使生成的表面着色器代码包含<a href="/en/docs/graphics/shaders/shader-writing/sl-reference/shader-shaderlab-commands/sl-blend">混合</a>命令；而启用 Alpha 镂空将根据给定的变量在生成的像素着色器中执行片元废弃。</p><ul><li><p><code>alpha</code> 或 <code>alpha:auto</code> - 对于简单的光照函数，将选择淡化透明度（与 <code>alpha:fade</code> 相同）；对于基于物理的光照函数，将选择预乘透明度（与 <code>alpha:premul</code> 相同）。</p></li><li><p><code>alpha:blend</code> - 启用 Alpha 混合。</p></li><li><p><code>alpha:fade</code> - 启用传统淡化透明度。</p></li><li><p><code>alpha:premul</code> - 启用预乘 Alpha 透明度。</p></li><li><p><code>alphatest:VariableName</code> - 启用 Alpha 镂空透明度。剪切值位于具有 VariableName 的浮点变量中。您可能还想使用 <code>addshadow</code> 指令生成正确的阴影投射物通道。</p></li><li><p><code>keepalpha</code> - 默认情况下，无论输出结构的 Alpha 输出是什么，或者光照函数返回什么，不透明表面着色器都将 1.0（白色）写入 Alpha 通道。使用此选项可以保持光照函数的 Alpha 值，即使对于不透明的表面着色器也是如此。</p></li><li><p><code>decal:add</code> - 附加贴花着色器（例如 terrain AddPass）。这适用于位于其他表面之上并使用附加混合的对象。请参阅<a href="/en/docs/graphics/shaders/shader-writing/sl-surface-shaders/sl-surface-shader-examples">表面着色器示例</a></p></li><li><p><code>decal:blend</code> - 半透明贴花着色器。这适用于位于其他表面之上并使用 Alpha 混合的对象。请参阅<a href="/en/docs/graphics/shaders/shader-writing/sl-surface-shaders/sl-surface-shader-examples">表面着色器示例</a></p><p><strong>自定义修改器函数</strong> 可用于更改或计算传入的顶点数据，或更改最终计算的片元颜色。</p></li><li><p><code>vertex:VertexFunction</code> - 自定义顶点修改函数。在生成的顶点着色器的开始处调用此函数，并且此函数可以修改或计算每顶点数据。请参阅<a href="/en/docs/graphics/shaders/shader-writing/sl-surface-shaders/sl-surface-shader-examples">表面着色器示例</a>。</p></li><li><p><code>finalcolor:ColorFunction</code> - 自定义最终颜色修改函数。请参阅<a href="/en/docs/graphics/shaders/shader-writing/sl-surface-shaders/sl-surface-shader-examples">表面着色器示例</a>。</p></li><li><p><code>finalgbuffer:ColorFunction</code> - 用于更改 G 缓冲区内容的自定义延迟路径。</p></li><li><p><code>finalprepass:ColorFunction</code> - 自定义预通道基本路径。</p><p><strong>阴影和曲面细分</strong>  - 可以提供其他指令来控制阴影和曲面细分的处理方式。</p></li><li><p><code>addshadow</code> - 生成阴影投射物通道。常用于自定义的顶点修改，以便阴影投射也可以获得程序化顶点动画。通常情况下，着色器不需要任何特殊的阴影处理，因为它们可以通过回退机制来使用阴影投射物通道。</p></li><li><p><code>fullforwardshadows</code> - Support all light shadow types in <a href="/en/docs/graphics/render-pipelines/built-in-render-pipeline/rendering-paths/render-tech-forward-rendering">Forward</a> rendering path. By default shaders only support shadows from one directional light in forward rendering (to save on internal shader variant count). If you need point or Spot Light shadows in forward rendering, use this directive.</p></li><li><p><code>tessellate:TessFunction</code> - 使用 DX11 GPU 曲面细分；该函数计算曲面细分因子。有关详细信息，请参阅<a href="/en/docs/graphics/shaders/shader-writing/sl-surface-shaders/sl-surface-shader-tessellation">表面着色器曲面细分</a>。</p><p><strong>代码生成选项</strong>  - 默认情况下，生成的表面着色器代码会尝试处理所有可能的光照/阴影/光照贴图情况。但是在某些情况下，您知道您不需要其中的一部分，可以调整生成的代码以跳过它们。这样可以减小着色器，从而提高加载速度。</p></li><li><p><code>exclude_path:deferred</code>、<code>exclude_path:forward</code> 和 <code>exclude_path:prepass</code> - 不为给定的渲染路径（分别对应<a href="/en/docs/graphics/render-pipelines/built-in-render-pipeline/rendering-paths/render-tech-deferred-shading">延迟着色</a>路径、<a href="/en/docs/graphics/render-pipelines/built-in-render-pipeline/rendering-paths/render-tech-forward-rendering">前向</a>路径和<a href="/en/docs/graphics/render-pipelines/built-in-render-pipeline/rendering-paths/render-tech-deferred-lighting">旧版延迟</a>路径）生成通道。</p></li><li><p><code>noshadow</code> - 禁用此着色器中的所有阴影接受支持。</p></li><li><p><code>noambient</code> - 不应用任何环境光照或光照探针。</p></li><li><p><code>novertexlights</code> - 在前向渲染中不应用任何光照探针或每顶点光源。</p></li><li><p><code>nolightmap</code> - 禁用此着色器中的所有光照贴图支持。</p></li><li><p><code>nodynlightmap</code> - 禁用此着色器中的运行时动态全局光照支持。</p></li><li><p><code>nodirlightmap</code> - 禁用此着色器中的方向光照贴图支持。</p></li><li><p><code>nofog</code> - 禁用所有内置雾效支持。</p></li><li><p><code>nometa</code> - 不生成“Meta”通道（由光照贴图和动态全局光照用于提取表面信息）。</p></li><li><p><code>noforwardadd</code> - 禁用<a href="/en/docs/graphics/render-pipelines/built-in-render-pipeline/rendering-paths/render-tech-forward-rendering">前向</a>渲染附加通道。这会使着色器支持一个完整方向光，所有其他光源均进行每顶点/SH 计算。也能减小着色器。</p></li><li><p><code>nolppv</code> - 禁用此着色器中的光照探针代理体支持。</p></li><li><p><code>noshadowmask</code> - 为此着色器禁用阴影遮罩支持（包括 <a href="/en/docs/graphics/lighting-overview/class-lighting-settings/lighting-mode/light-mode-mixed-shadowmask">Shadowmask</a> 和 <a href="/en/docs/graphics/lighting-overview/class-lighting-settings/lighting-mode/light-mode-mixed-shadowmask">Distance Shadowmask</a>）。</p><p><strong>其他选项</strong> </p></li><li><p><code>softvegetation</code> - 仅在开启 Soft Vegetation 时才渲染表面着色器。</p></li><li><p><code>interpolateview</code> - 在顶点着色器中计算视图方向并进行插值；而不是在像素着色器中计算。这可以使像素着色器更快，但会额外消耗一个纹理插值器。</p></li><li><p><code>halfasview</code> - 将半方向矢量传入光照函数而不是视图方向。计算半方向并按每个顶点对其进行标准化。这更快，但并不完全正确。</p></li><li><p><code>approxview</code> - 在 Unity 5.0 中已删除。请改用 <code>interpolateview</code>。</p></li><li><p><code>dualforward</code> - 在<a href="/en/docs/graphics/render-pipelines/built-in-render-pipeline/rendering-paths/render-tech-forward-rendering">前向</a>渲染路径中使用双光照贴图。</p></li><li><p><code>dithercrossfade</code> - 使表面着色器支持抖动效果。然后，可将此着色器应用于使用<a href="/en/docs/graphics/mesh/level-of-detail/class-lodgroup">细节级别组 (LOD Group)</a> 组件（配置为交叉淡入淡出过渡模式）的游戏对象。</p></li></ul><p>要了解与上述不同选项的具体区别，使用<a href="/en/docs/graphics/shaders/shaders-overview/class-shader">着色器检视面板 (Shader Inspector)</a> 中的“Show Generated Code”按钮会很有帮助。</p><h2 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="表面着色器输入结构">表面着色器输入结构<a class="hash-link" href="#表面着色器输入结构" title="Direct link to heading">​</a></h2><p>输入结构 <code>Input</code> 通常具有着色器所需的所有纹理坐标。纹理坐标必须命名为“<code>uv</code>”后跟纹理名称的形式（如果要使用第二个纹理坐标集，则以“<code>uv2</code>”开头）。</p><p>可以放入输入结构的其他值：</p><ul><li><code>float3 viewDir</code> - 包含视图方向，用于计算视差效果、边缘光照等等。</li><li>具有 <code>COLOR</code> 语义的 <code>float4</code> - 包含插值的每顶点颜色。</li><li><code>float4 screenPos</code> - 包含反射或屏幕空间效果的屏幕空间位置。请注意，这不适合 <a href="/en/docs/graphics/shaders/shader-writing/sl-reference/shader-shaderlab-commands/sl-grab-pass">GrabPass</a>；您需要使用 <code>ComputeGrabScreenPos</code> 函数自己计算自定义 UV。</li><li><code>float3 worldPos</code> - 包含世界空间位置。</li><li><code>float3 worldRefl</code> - 在<!-- -->_<!-- -->表面着色器不写入 o.Normal<!-- -->_<!-- --> 的情况下，包含世界反射矢量。有关示例，请参阅反光漫射 (Reflect-Diffuse) 着色器。</li><li><code>float3 worldNormal</code> - 在<!-- -->_<!-- -->表面着色器不写入 o.Normal<!-- -->_<!-- --> 的情况下，包含世界法线矢量。</li><li><code>float3 worldRefl; INTERNAL_DATA</code> - 在<!-- -->_<!-- -->表面着色器写入 o.Normal<!-- -->_<!-- --> 的情况下，包含世界反射矢量。要获得基于每像素法线贴图的反射矢量，请使用 <code>WorldReflectionVector (IN, o.Normal)</code>。有关示例，请参阅反光凹凸 (Reflect-Bumped) 着色器。</li><li><code>float3 worldNormal; INTERNAL_DATA</code> - 在<!-- -->_<!-- -->表面着色器写入 o.Normal<!-- -->_<!-- --> 的情况下，包含世界法线矢量。要获得基于每像素法线贴图的法线矢量，请使用 <code>WorldNormalVector (IN, o.Normal)</code>。</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="表面着色器和-directx-11-hlsl-语法">表面着色器和 DirectX 11 HLSL 语法<a class="hash-link" href="#表面着色器和-directx-11-hlsl-语法" title="Direct link to heading">​</a></h2><p>目前，表面着色器编译管线的某些部分不能理解 <a href="/en/docs/graphics/graphics-apis/using-dx11gl3features">DirectX 11</a> 特有的 HLSL 语法，因此如果您正在使用 HLSL 功能，如 StructuredBuffers、RWTextures 和其他非 DX9 语法，需要将其包装到仅限 DX11 的预处理器宏中。</p><p>有关详细信息，请参阅<a href="/en/docs/graphics/shaders/shader-writing/sl-platform-differences">平台特定差异</a>和<a href="/en/docs/graphics/shaders/shader-writing/sl-shader-programs/sl-shader-programs">使用 HLSL</a> 页面。</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/danyow/danyow.github.io/edit/main/docs/unity/graphics/shaders/shader-writing/sl-surface-shaders/sl-surface-shaders.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_OMbO" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vA0S"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-03-31T15:56:20.000Z">3/31/2022</time></b> by <b>danyow</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/en/docs/graphics/shaders/shader-writing/sl-shading-language"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">编写着色器概述</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/en/docs/graphics/shaders/shader-writing/sl-surface-shaders/sl-render-pipeline"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">表面着色器和渲染路径</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_jWtb thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#渲染管线兼容性" class="table-of-contents__link toc-highlight">渲染管线兼容性</a></li><li><a href="#概述" class="table-of-contents__link toc-highlight">概述</a></li><li><a href="#工作原理" class="table-of-contents__link toc-highlight">工作原理</a></li><li><a href="#示例" class="table-of-contents__link toc-highlight">示例</a></li><li><a href="#表面着色器编译指令" class="table-of-contents__link toc-highlight">表面着色器编译指令</a><ul><li><a href="#必需参数" class="table-of-contents__link toc-highlight">必需参数</a></li><li><a href="#可选参数" class="table-of-contents__link toc-highlight">可选参数</a></li></ul></li><li><a href="#表面着色器输入结构" class="table-of-contents__link toc-highlight">表面着色器输入结构</a></li><li><a href="#表面着色器和-directx-11-hlsl-语法" class="table-of-contents__link toc-highlight">表面着色器和 DirectX 11 HLSL 语法</a></li></ul></div></div></div></div></main></div></div></div>
<script src="/en/assets/js/runtime~main.8b3186ef.js"></script>
<script src="/en/assets/js/main.4cfd5153.js"></script>
</body>
</html>