"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[56172],{35318:function(e,r,t){t.d(r,{Zo:function(){return l},kt:function(){return u}});var n=t(27378);function a(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function i(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function o(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?i(Object(t),!0).forEach((function(r){a(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function c(e,r){if(null==e)return{};var t,n,a=function(e,r){if(null==e)return{};var t,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||(a[t]=e[t]);return a}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=n.createContext({}),p=function(e){var r=n.useContext(s),t=r;return e&&(t="function"==typeof e?e(r):o(o({},r),e)),t},l=function(e){var r=p(e.components);return n.createElement(s.Provider,{value:r},e.children)},d={inlineCode:"code",wrapper:function(e){var r=e.children;return n.createElement(n.Fragment,{},r)}},h=n.forwardRef((function(e,r){var t=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),h=p(t),u=a,f=h["".concat(s,".").concat(u)]||h[u]||d[u]||i;return t?n.createElement(f,o(o({ref:r},l),{},{components:t})):n.createElement(f,o({ref:r},l))}));function u(e,r){var t=arguments,a=r&&r.mdxType;if("string"==typeof e||a){var i=t.length,o=new Array(i);o[0]=h;var c={};for(var s in r)hasOwnProperty.call(r,s)&&(c[s]=r[s]);c.originalType=e,c.mdxType="string"==typeof e?e:a,o[1]=c;for(var p=2;p<i;p++)o[p]=t[p];return n.createElement.apply(null,o)}return n.createElement.apply(null,t)}h.displayName="MDXCreateElement"},57868:function(e,r,t){t.r(r),t.d(r,{assets:function(){return p},contentTitle:function(){return c},default:function(){return h},frontMatter:function(){return o},metadata:function(){return s},toc:function(){return l}});t(27378);var n=t(35318);function a(){return a=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},a.apply(this,arguments)}function i(e,r){if(null==e)return{};var t,n,a=function(e,r){if(null==e)return{};var t,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||(a[t]=e[t]);return a}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}const o={id:"How BatchRendererGroup works",slug:"/graphics/graphics-performance-profiling/batch-renderer-group/batch-renderer-group-how"},c="How BatchRendererGroup works",s={unversionedId:"unity/graphics/graphics-performance-profiling/batch-renderer-group/How BatchRendererGroup works",id:"version-Unity@2022.1/unity/graphics/graphics-performance-profiling/batch-renderer-group/How BatchRendererGroup works",title:"How BatchRendererGroup works",description:"To render to the screen, BatchRendererGroup (BRG) generates draw commands which are a BRG-specific concept that contains everything Unity needs to efficiently create optimized, instanced draw calls.",source:"@site/versioned_docs/version-Unity@2022.1/unity/graphics/graphics-performance-profiling/batch-renderer-group/batch-renderer-group-how.md",sourceDirName:"unity/graphics/graphics-performance-profiling/batch-renderer-group",slug:"/graphics/graphics-performance-profiling/batch-renderer-group/batch-renderer-group-how",permalink:"/en/docs/graphics/graphics-performance-profiling/batch-renderer-group/batch-renderer-group-how",editUrl:"https://github.com/danyow/danyow.github.io/edit/main/docs/unity/graphics/graphics-performance-profiling/batch-renderer-group/batch-renderer-group-how.md",tags:[],version:"Unity@2022.1",lastUpdatedBy:"danyow",lastUpdatedAt:1648742180,formattedLastUpdatedAt:"3/31/2022",frontMatter:{id:"How BatchRendererGroup works",slug:"/graphics/graphics-performance-profiling/batch-renderer-group/batch-renderer-group-how"},sidebar:"unity",previous:{title:"Getting started with BatchRendererGroup",permalink:"/en/docs/graphics/graphics-performance-profiling/batch-renderer-group/batch-renderer-group-getting-started"},next:{title:"DOTS Instancing shaders",permalink:"/en/docs/graphics/graphics-performance-profiling/batch-renderer-group/dots-instancing-shaders"}},p={},l=[{value:"Technical limitations",id:"technical-limitations",level:2}],d={toc:l};function h(e){var{components:r}=e,t=i(e,["components"]);return(0,n.kt)("wrapper",a({},d,t,{components:r,mdxType:"MDXLayout"}),(0,n.kt)("h1",a({},{id:"how-batchrenderergroup-works"}),"How BatchRendererGroup works"),(0,n.kt)("p",null,"To render to the screen, BatchRendererGroup (BRG) generates ",(0,n.kt)("a",a({parentName:"p"},{href:"https://docs.unity3d.com/cn/2022.1/ScriptReference/Rendering.BatchDrawCommand.html"}),"draw commands")," which are a BRG-specific concept that contains everything Unity needs to efficiently create optimized, ",(0,n.kt)("a",a({parentName:"p"},{href:"/en/docs/graphics/graphics-performance-profiling/optimizing-draw-calls/gpuinstancing/gpuinstancing"}),"instanced")," draw calls."),(0,n.kt)("p",null,"To determine when to render the instances in a draw command, BRG uses ",(0,n.kt)("a",a({parentName:"p"},{href:"https://docs.unity3d.com/cn/2022.1/ScriptReference/Rendering.BatchFilterSettings.html"}),"filter settings"),". Filter settings control when to render instances themselves, but also when to render certain facets of each instance such as its shadows and motion vectors"),(0,n.kt)("p",null,"Since the same filter settings often apply to a large number of draw commands, BRG uses ",(0,n.kt)("a",a({parentName:"p"},{href:"https://docs.unity3d.com/cn/2022.1/ScriptReference/Rendering.BatchDrawRange.html"}),"draw ranges")," to apply filter settings to a range of draw commands. A draw range combines a contiguous number of draw commands with an instance of filter settings that apply to them. Draw ranges are especially useful if the filter settings determine that Unity shouldn\u2019t render the draw commands, because it allows Unity to efficiently skip rendering for every draw command in the range."),(0,n.kt)("p",null,"There is no restriction on which instances are in which draw calls. It\u2019s possible to render the same instance, an object with the same instance index and batchID, many times with different meshes and materials. One example where this can be useful is drawing different sub-meshes with different materials, but using the same instance indices to share properties like transform matrices between the draws."),(0,n.kt)("p",null,"For information on how to create a renderer with BRG, see ",(0,n.kt)("a",a({parentName:"p"},{href:"/en/docs/graphics/graphics-performance-profiling/batch-renderer-group/batch-renderer-group-creating-a-renderer/batch-renderer-group-creating-a-renderer"}),"Creating a renderer with BatchRendererGroup"),"."),(0,n.kt)("h2",a({},{id:"technical-limitations"}),"Technical limitations"),(0,n.kt)("p",null,"In most cases, Unity renders a draw command as a single, platform-level, instanced draw call for each compatible ",(0,n.kt)("a",a({parentName:"p"},{href:"https://docs.unity3d.com/cn/2022.1/ScriptReference/Rendering.ScriptableRenderContext.DrawRenderers.html"}),"DrawRenderers")," call in the Scriptable Render Pipeline. A limitation where Unity can\u2019t do this occurs when the graphics API has a lower size limit for draw calls than the draw command\u2019s ",(0,n.kt)("inlineCode",{parentName:"p"},"visibleCount"),". In this case, Unity splits the draw command into multiple instanced draw calls."))}h.isMDXComponent=!0}}]);