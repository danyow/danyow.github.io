"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[93422],{35318:function(e,r,t){t.d(r,{Zo:function(){return h},kt:function(){return u}});var n=t(27378);function a(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function i(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function o(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?i(Object(t),!0).forEach((function(r){a(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function c(e,r){if(null==e)return{};var t,n,a=function(e,r){if(null==e)return{};var t,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||(a[t]=e[t]);return a}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=n.createContext({}),l=function(e){var r=n.useContext(s),t=r;return e&&(t="function"==typeof e?e(r):o(o({},r),e)),t},h=function(e){var r=l(e.components);return n.createElement(s.Provider,{value:r},e.children)},p={inlineCode:"code",wrapper:function(e){var r=e.children;return n.createElement(n.Fragment,{},r)}},d=n.forwardRef((function(e,r){var t=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,h=c(e,["components","mdxType","originalType","parentName"]),d=l(t),u=a,m=d["".concat(s,".").concat(u)]||d[u]||p[u]||i;return t?n.createElement(m,o(o({ref:r},h),{},{components:t})):n.createElement(m,o({ref:r},h))}));function u(e,r){var t=arguments,a=r&&r.mdxType;if("string"==typeof e||a){var i=t.length,o=new Array(i);o[0]=d;var c={};for(var s in r)hasOwnProperty.call(r,s)&&(c[s]=r[s]);c.originalType=e,c.mdxType="string"==typeof e?e:a,o[1]=c;for(var l=2;l<i;l++)o[l]=t[l];return n.createElement.apply(null,o)}return n.createElement.apply(null,t)}d.displayName="MDXCreateElement"},16270:function(e,r,t){t.r(r),t.d(r,{assets:function(){return l},contentTitle:function(){return c},default:function(){return d},frontMatter:function(){return o},metadata:function(){return s},toc:function(){return h}});t(27378);var n=t(35318);function a(){return a=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},a.apply(this,arguments)}function i(e,r){if(null==e)return{};var t,n,a=function(e,r){if(null==e)return{};var t,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||(a[t]=e[t]);return a}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}const o={id:"The SearchProvider class",slug:"/search-overview/api/api-search-provider-class"},c="The SearchProvider class",s={unversionedId:"unity/search-overview/api/The SearchProvider class",id:"version-Unity@2022.1/unity/search-overview/api/The SearchProvider class",title:"The SearchProvider class",description:"The  SearchProvider  class executes searches for specific types of items, and manages thumbnails, descriptions, and sub-filters.",source:"@site/versioned_docs/version-Unity@2022.1/unity/search-overview/api/api-search-provider-class.md",sourceDirName:"unity/search-overview/api",slug:"/search-overview/api/api-search-provider-class",permalink:"/en/docs/search-overview/api/api-search-provider-class",editUrl:"https://github.com/danyow/danyow.github.io/edit/main/docs/unity/search-overview/api/api-search-provider-class.md",tags:[],version:"Unity@2022.1",lastUpdatedBy:"danyow",lastUpdatedAt:1648742180,formattedLastUpdatedAt:"3/31/2022",frontMatter:{id:"The SearchProvider class",slug:"/search-overview/api/api-search-provider-class"},sidebar:"unity",previous:{title:"Registering a Search Provider",permalink:"/en/docs/search-overview/api/api-register-provider"},next:{title:"Performing a search",permalink:"/en/docs/search-overview/api/api-searching"}},l={},h=[{value:"Caching and releasing resources",id:"caching-and-releasing-resources",level:2},{value:"\u521d\u59cb\u5316",id:"\u521d\u59cb\u5316",level:2},{value:"Tracking item selection",id:"tracking-item-selection",level:2},{value:"Enabling drag and drop",id:"enabling-drag-and-drop",level:2},{value:"Including a provider in a contextual search",id:"including-a-provider-in-a-contextual-search",level:2}],p={toc:h};function d(e){var{components:r}=e,t=i(e,["components"]);return(0,n.kt)("wrapper",a({},p,t,{components:r,mdxType:"MDXLayout"}),(0,n.kt)("h1",a({},{id:"the-searchprovider-class"}),"The SearchProvider class"),(0,n.kt)("p",null,"The  ",(0,n.kt)("strong",{parentName:"p"},(0,n.kt)("a",a({parentName:"strong"},{href:"https://docs.unity3d.com/cn/2022.1/ScriptReference/Search.SearchProvider.html"}),"SearchProvider")),"  class executes searches for specific types of items, and manages thumbnails, descriptions, and sub-filters."),(0,n.kt)("p",null,"It has the following basic API:"),(0,n.kt)("pre",null,(0,n.kt)("code",a({parentName:"pre"},{}),'public class SearchProvider\n{\n    public SearchProvider(string id, string displayName = null);\n\n    // Creates an Item bound to this provider.\n    public SearchItem CreateItem(string id, string label = null, string description = null, Texture2D thumbnail = null);\n\n    // Utility functions to check whether the search text matches a string.\n    public static bool MatchSearchGroups(string searchContext, string content);\n    public static bool MatchSearchGroups(string searchContext, string content,\n                                        out int startIndex, out int endIndex);\n\n    // The provider\'s unique ID.\n    public NameId name;\n    // Text token to "filter" a provider (for example, "me:", "p:", and "s:").\n    public string filterId;\n    // This provider is only active when a search explicitly specifies it with\n    // its filterId.\n    public bool isExplicitProvider;\n    // Handler to fetch and format the label of a search item.\n    public FetchStringHandler fetchLabel;\n    // Handler to provide an async description for an item. Called just before\n    // Search displays the item.\n    // Allows a plug-in provider to fetch long descriptions only when\n    // Search needs them.\n    public FetchStringHandler fetchDescription;\n    // Handler to provider an async thumbnail for an item. Called just before\n    // Search displays the item.\n    // Allows a plug-in provider to fetch/generate previews only when\n    // Search needs them.\n    public PreviewHandler fetchThumbnail;\n    // Handler to support drag interactions. It is up to the SearchProvider\n    // to properly set up the DragAndDrop manager.\n    public StartDragHandler startDrag;\n    // Called when the selection changes and Search can track it.\n    public TrackSelectionHandler trackSelection;\n    // MANDATORY: Handler to get items for a search context.\n    public GetItemsHandler fetchItems;\n    // A Search Provider can return a list of words that help the user complete\n    // their search query.\n    public GetKeywordsHandler fetchKeywords;\n    // List of sub-filters that are visible in the FilterWindow for a\n    // SearchProvider (see AssetProvider for an example).\n    public List&lt;NameId&gt; subCategories;\n    // Called when the Search window opens. Allows the Provider to perform\n    // some caching.\n    public Action onEnable;\n    // Called when the Search window closes. Allows the Provider to release\n    // cached resources.\n    public Action onDisable;\n    // Int to sort the Provider. Affects the order of search results and the\n    // order in which providers are shown in the FilterWindow.\n    public int priority;\n    // Called when Search opens in "contextual mode". If you return true\n    // it means the provider is enabled for this search context.\n    public IsEnabledForContextualSearch isEnabledForContextualSearch;\n}\n')),(0,n.kt)("h2",a({},{id:"caching-and-releasing-resources"}),"Caching and releasing resources"),(0,n.kt)("p",null,"When you launch the Search window, it calls ",(0,n.kt)("a",a({parentName:"p"},{href:"https://docs.unity3d.com/cn/2022.1/Manual/Search.SearchProvider-onEnable.html"}),(0,n.kt)("inlineCode",{parentName:"a"},"onEnable")),", which you can use to cache resources."),(0,n.kt)("p",null,"When you close the Search window, it calls ",(0,n.kt)("a",a({parentName:"p"},{href:"https://docs.unity3d.com/cn/2022.1/Manual/Search.SearchProvider-onDisable.html"}),(0,n.kt)("inlineCode",{parentName:"a"},"onDisable")),", which you can use to release resources."),(0,n.kt)("h2",a({},{id:"\u521d\u59cb\u5316"}),"\u521d\u59cb\u5316"),(0,n.kt)("p",null,"Because the Search item list uses a virtual scrolling algorithm, some ",(0,n.kt)("a",a({parentName:"p"},{href:"https://docs.unity3d.com/cn/2022.1/ScriptReference/Search.SearchItem.html"}),(0,n.kt)("inlineCode",{parentName:"a"},"SearchItem"))," fields (for example, ",(0,n.kt)("a",a({parentName:"p"},{href:"https://docs.unity3d.com/cn/2022.1/Manual/Search.SearchItem-label.html"}),(0,n.kt)("inlineCode",{parentName:"a"},"label")),", ",(0,n.kt)("a",a({parentName:"p"},{href:"https://docs.unity3d.com/cn/2022.1/Manual/Search.SearchItem-thumbnail.html"}),(0,n.kt)("inlineCode",{parentName:"a"},"thumbnail")),", and ",(0,n.kt)("a",a({parentName:"p"},{href:"https://docs.unity3d.com/cn/2022.1/Manual/Search.SearchItem-description.html"}),(0,n.kt)("inlineCode",{parentName:"a"},"description")),") are fetched on demand, if they are not already provided."),(0,n.kt)("p",null,"To populate those fields after the items are created, you need to initialize the ",(0,n.kt)("a",a({parentName:"p"},{href:"https://docs.unity3d.com/cn/2022.1/ScriptReference/Search.SearchProvider.html"}),(0,n.kt)("inlineCode",{parentName:"a"},"SearchProvider"))," with specific handlers (",(0,n.kt)("a",a({parentName:"p"},{href:"https://docs.unity3d.com/cn/2022.1/Manual/Search.SearchProvider-fetchLabel.html"}),(0,n.kt)("inlineCode",{parentName:"a"},"fetchLabel")),", ",(0,n.kt)("a",a({parentName:"p"},{href:"https://docs.unity3d.com/cn/2022.1/Manual/Search.SearchProvider-fetchDescription.html"}),(0,n.kt)("inlineCode",{parentName:"a"},"fetchDescription")),", ",(0,n.kt)("a",a({parentName:"p"},{href:"https://docs.unity3d.com/cn/2022.1/Manual/Search.SearchProvider-fetchThumbnail.html"}),(0,n.kt)("inlineCode",{parentName:"a"},"fetchThumbnail")),")."),(0,n.kt)("h2",a({},{id:"tracking-item-selection"}),"Tracking item selection"),(0,n.kt)("p",null,"You can register a callback on ",(0,n.kt)("a",a({parentName:"p"},{href:"https://docs.unity3d.com/cn/2022.1/Manual/Search.SearchProvider-trackSelection.html"}),(0,n.kt)("inlineCode",{parentName:"a"},"trackSelection"))," to have Search do something whenever you select an item in the search results using the mouse or the keyboard. For example, the ",(0,n.kt)("a",a({parentName:"p"},{href:"/en/docs/search-overview/search-providers/search-assets"}),"Asset")," and ",(0,n.kt)("a",a({parentName:"p"},{href:"/en/docs/search-overview/search-providers/search-scene"}),"Scene")," providers use the ",(0,n.kt)("a",a({parentName:"p"},{href:"https://docs.unity3d.com/cn/2022.1/Manual/Search.SearchProvider-trackSelection.html"}),(0,n.kt)("inlineCode",{parentName:"a"},"trackSelection"))," callback to ping the selected item in Search."),(0,n.kt)("h2",a({},{id:"enabling-drag-and-drop"}),"Enabling drag and drop"),(0,n.kt)("p",null,"Some Search Providers return items that you can drag and drop into the Scene. If you are creating a custom provider whose items support drag and drop, implement ",(0,n.kt)("a",a({parentName:"p"},{href:"https://docs.unity3d.com/cn/2022.1/Manual/Search.SearchProvider-startDrag.html"}),(0,n.kt)("inlineCode",{parentName:"a"},"startDrag")),"."),(0,n.kt)("p",null,"For example, the ",(0,n.kt)("a",a({parentName:"p"},{href:"/en/docs/search-overview/search-providers/search-assets"}),"Asset")," and ",(0,n.kt)("a",a({parentName:"p"},{href:"/en/docs/search-overview/search-providers/search-scene"}),"Scene")," providers populate the ",(0,n.kt)("inlineCode",{parentName:"p"},"DragAndDrop")," structure with the relevant item UIDs to allow proper drag and drop interactions."),(0,n.kt)("h2",a({},{id:"including-a-provider-in-a-contextual-search"}),"Including a provider in a contextual search"),(0,n.kt)("p",null,"When you open the Search window with the  ",(0,n.kt)("strong",{parentName:"p"},"Alt Shift + C"),"  shortcut, it starts a contextual search, meaning Search searches the window that has focus."),(0,n.kt)("p",null,"When you launch a contextual search, providers that override ",(0,n.kt)("a",a({parentName:"p"},{href:"https://docs.unity3d.com/cn/2022.1/Manual/Search.SearchProvider-isEnabledForContextualSearch.html"}),(0,n.kt)("inlineCode",{parentName:"a"},"isEnabledForContextualSearch"))," check to see if they should be enabled, as in the following example:"),(0,n.kt)("pre",null,(0,n.kt)("code",a({parentName:"pre"},{}),'// Taken from Scene hierarchy provider:\n// Makes the provider part of the contextual search if the Scene view or the\n// Hierarchy window has focus.\nisEnabledForContextualSearch = () =&gt;\n                QuickSearchTool.IsFocusedWindowTypeName("SceneView") ||\n                QuickSearchTool.IsFocusedWindowTypeName("SceneHierarchyWindow");\n')))}d.isMDXComponent=!0}}]);