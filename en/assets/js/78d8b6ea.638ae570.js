"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[94288],{35318:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return g}});var r=n(27378);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=r.createContext({}),l=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=l(e.components);return r.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,s=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),d=l(n),g=i,m=d["".concat(s,".").concat(g)]||d[g]||u[g]||a;return n?r.createElement(m,o(o({ref:t},p),{},{components:n})):r.createElement(m,o({ref:t},p))}));function g(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,o=new Array(a);o[0]=d;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:i,o[1]=c;for(var l=2;l<a;l++)o[l]=n[l];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},38654:function(e,t,n){n.r(t),n.d(t,{assets:function(){return l},contentTitle:function(){return c},default:function(){return d},frontMatter:function(){return o},metadata:function(){return s},toc:function(){return p}});n(27378);var r=n(35318);function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}function a(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}const o={id:"\u6258\u7ba1\u5806\u6808\u8ddf\u8e2a\u4e0e IL2CPP",slug:"/scripting-section/unity-architecture/scripting-backends/il2cpp/il2cpp-managed-stack-traces"},c="\u6258\u7ba1\u5806\u6808\u8ddf\u8e2a\u4e0e IL2CPP",s={unversionedId:"unity/scripting-section/unity-architecture/scripting-backends/il2cpp/\u6258\u7ba1\u5806\u6808\u8ddf\u8e2a\u4e0e IL2CPP",id:"version-Unity@2022.1/unity/scripting-section/unity-architecture/scripting-backends/il2cpp/\u6258\u7ba1\u5806\u6808\u8ddf\u8e2a\u4e0e IL2CPP",title:"\u6258\u7ba1\u5806\u6808\u8ddf\u8e2a\u4e0e IL2CPP",description:"When an exception happens in managed code, the stack trace for the exception can help you understand the cause of the exception. This can often be found in the player log file. However, the managed stack trace might not appear the way you expect because the stack trace varies depending on the build configuration.\u200b \u200b",source:"@site/versioned_docs/version-Unity@2022.1/unity/scripting-section/unity-architecture/scripting-backends/il2cpp/il2cpp-managed-stack-traces.md",sourceDirName:"unity/scripting-section/unity-architecture/scripting-backends/il2cpp",slug:"/scripting-section/unity-architecture/scripting-backends/il2cpp/il2cpp-managed-stack-traces",permalink:"/en/docs/scripting-section/unity-architecture/scripting-backends/il2cpp/il2cpp-managed-stack-traces",editUrl:"https://github.com/danyow/danyow.github.io/edit/main/docs/unity/scripting-section/unity-architecture/scripting-backends/il2cpp/il2cpp-managed-stack-traces.md",tags:[],version:"Unity@2022.1",lastUpdatedBy:"danyow",lastUpdatedAt:1648742180,formattedLastUpdatedAt:"3/31/2022",frontMatter:{id:"\u6258\u7ba1\u5806\u6808\u8ddf\u8e2a\u4e0e IL2CPP",slug:"/scripting-section/unity-architecture/scripting-backends/il2cpp/il2cpp-managed-stack-traces"},sidebar:"unity",previous:{title:"Handling platform specific settings for IL2CPP additional arguments",permalink:"/en/docs/scripting-section/unity-architecture/scripting-backends/il2cpp/handling-il2cpp-additional-args"},next:{title:"Windows \u8fd0\u884c\u65f6\u652f\u6301",permalink:"/en/docs/scripting-section/unity-architecture/scripting-backends/il2cpp/il2cpp-windows-runtime-support"}},l={},p=[{value:"C++ Compiler Configuration options",id:"c-compiler-configuration-options",level:2},{value:"Debug",id:"debug",level:3},{value:"Release and master",id:"release-and-master",level:3},{value:"\u6e90\u4ee3\u7801\u884c\u53f7",id:"\u6e90\u4ee3\u7801\u884c\u53f7",level:2},{value:"Script Debugging enabled",id:"script-debugging-enabled",level:2}],u={toc:p};function d(e){var{components:t}=e,n=a(e,["components"]);return(0,r.kt)("wrapper",i({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",i({},{id:"\u6258\u7ba1\u5806\u6808\u8ddf\u8e2a\u4e0e-il2cpp"}),"\u6258\u7ba1\u5806\u6808\u8ddf\u8e2a\u4e0e IL2CPP"),(0,r.kt)("p",null,"When an exception happens in managed code, the stack trace for the exception can help you understand the cause of the exception. This can often be found in the player log file. However, the managed stack trace might not appear the way you expect because the stack trace varies depending on the build configuration.\u200b \u200b"),(0,r.kt)("h2",i({},{id:"c-compiler-configuration-options"}),"C++ Compiler Configuration options"),(0,r.kt)("h3",i({},{id:"debug"}),"Debug"),(0,r.kt)("p",null,"When the C++ Compiler Configuration is set to Debug, IL2CPP reports a reliable managed stack trace, and includes each managed method in the call stack. The stack trace doesn\u2019t include line numbers from the original C# source code. \u200b"),(0,r.kt)("h3",i({},{id:"release-and-master"}),"Release and master"),(0,r.kt)("p",null,"When the C++ Compiler Configuration is set to Release or Master, IL2CPP might produce a call stack that\u2019s missing one or more managed methods. This is because the C++ compiler has inlined the missing methods. Method inlining is usually good for performance at run time, but it can make call stacks more difficult to understand. IL2CPP always provides at least one managed method on the call stack. For stack traces created from managed exceptions, this is the method where the exception occurred. It also includes other methods if they aren\u2019t inlined.\u200b \u200b"),(0,r.kt)("h2",i({},{id:"\u6e90\u4ee3\u7801\u884c\u53f7"}),"\u6e90\u4ee3\u7801\u884c\u53f7"),(0,r.kt)("p",null,"To locate errors that the compiler finds in your code, you can configure the managed stack trace information to include the file name and line number in the managed stack traces. The managed stack trace information does not include this information by default, because it increases code size and causes the Unity Player to run more slowly."),(0,r.kt)("p",null," ",(0,r.kt)("strong",{parentName:"p"},"Note:"),"  The option to include line numbers in the stack trace is only available on desktop platforms."),(0,r.kt)("p",null,"To configure the managed stack trace information to include the file name and line numbers:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Go to  ",(0,r.kt)("strong",{parentName:"li"},"Edit"),"  ",">","  ",(0,r.kt)("strong",{parentName:"li"},"Project Settings"),"  ",">","  ",(0,r.kt)("strong",{parentName:"li"},"Player"),"  ",">","  ",(0,r.kt)("strong",{parentName:"li"},"Other Settings")," ."),(0,r.kt)("li",{parentName:"ol"},"Set  ",(0,r.kt)("strong",{parentName:"li"},"IL2CPP Stacktrace Information"),"  to  ",(0,r.kt)("strong",{parentName:"li"},"Method Name, File Name, and Line Number")," .")),(0,r.kt)("p",null,(0,r.kt)("img",i({parentName:"p"},{src:"https://docs.unity3d.com/cn/2022.1/uploads/Main/stack-trace-line-numbers-placeholder.png",alt:"stack-trace-line-numbers-placeholder.png"}))),(0,r.kt)("p",null," ",(0,r.kt)("strong",{parentName:"p"},"Note:"),"  When the  ",(0,r.kt)("strong",{parentName:"p"},"C++ Compiler Configuration"),"  is set to  ",(0,r.kt)("strong",{parentName:"p"},"Release"),"  or  ",(0,r.kt)("strong",{parentName:"p"},"Master")," , you might experience the following:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The compiler might inline some functions, which causes them not to appear in the stack trace."),(0,r.kt)("li",{parentName:"ul"},"The source code line numbers might not match up with the correct line numbers in your code.")),(0,r.kt)("h2",i({},{id:"script-debugging-enabled"}),"Script Debugging enabled"),(0,r.kt)("p",null,"To enable  ",(0,r.kt)("strong",{parentName:"p"},"Script Debugging")," , go to  ",(0,r.kt)("strong",{parentName:"p"},"File"),"  ",">","  ",(0,r.kt)("strong",{parentName:"p"},"Build Settings"),"  then click the checkbox next to  ",(0,r.kt)("strong",{parentName:"p"},"Script Debugging")," . With  ",(0,r.kt)("strong",{parentName:"p"},"Script Debugging"),"  enabled, IL2CPP will always report a correct managed stack trace with the method, file name, and line number. However, this increases the program size and produces slower code. Using script debugging solely to improve stack traces is not recommended. Instead, enable the option shown above."))}d.isMDXComponent=!0}}]);