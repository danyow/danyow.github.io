<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper docs-doc-page docs-version-Unity@2022.1 plugin-docs plugin-id-default docs-doc-id-unity/unity2d/sprites/class-sprite-atlas/Sprite Packer">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Danyow RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Danyow Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title="Danyow JSON Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-141789564-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-141789564-1",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Danyow" href="/opensearch.xml">
<link rel="alternate" type="application/rss+xml" href="/changelog/rss.xml" title="日志 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/changelog/atom.xml" title="日志 Atom Feed">
<link rel="alternate" type="application/json" href="/changelog/feed.json" title="日志 JSON Feed">
<link rel="icon" href="/img/logo.png">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="rgb(37, 194, 160)">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">
<link rel="apple-touch-icon" href="/img/logo.png">
<link rel="mask-icon" href="/img/logo.png" color="rgb(62, 204, 94)">
<meta name="msapplication-TileImage" content="/img/logo.png">
<meta name="msapplication-TileColor" content="#000">
<link rel="stylesheet" href="/katex/katex.min.css"><title data-rh="true">Sprite Packer | Danyow</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://danyow.github.io/docs/unity2d/sprites/class-sprite-atlas/sprite-packer"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="Unity@2022.1"><meta data-rh="true" name="docusaurus_tag" content="docs-default-Unity@2022.1"><meta data-rh="true" name="docsearch:version" content="Unity@2022.1"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-Unity@2022.1"><meta data-rh="true" property="og:title" content="Sprite Packer | Danyow"><meta data-rh="true" name="description" content="Sprite Packer 已弃用"><meta data-rh="true" property="og:description" content="Sprite Packer 已弃用"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://danyow.github.io/docs/unity2d/sprites/class-sprite-atlas/sprite-packer"><link data-rh="true" rel="alternate" href="https://danyow.github.io/docs/unity2d/sprites/class-sprite-atlas/sprite-packer" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://danyow.github.io/en/docs/unity2d/sprites/class-sprite-atlas/sprite-packer" hreflang="en"><link data-rh="true" rel="alternate" href="https://danyow.github.io/docs/unity2d/sprites/class-sprite-atlas/sprite-packer" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://S3KRFC060Q-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.bff76bc0.css">
<link rel="preload" href="/assets/js/runtime~main.4e562e6e.js" as="script">
<link rel="preload" href="/assets/js/main.9af7a4d9.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_BxGa">跳到主要内容</a></div><div class="announcementBar_yyVl" role="banner"><div class="announcementBarPlaceholder_Il1w"></div><div class="announcementBarContent_KFU1">⭐️ If you like, give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/danyow/danyow.github.io">GitHub</a> </div><button type="button" class="clean-btn close announcementBarClose_axA0" aria-label="关闭"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top navbarHideable_FcXi"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Danyow Logo" class="themedImage_aIr_ themedImage--light_DGIu" height="32" width="32"><img src="/img/logo-dark.svg" alt="Danyow Logo" class="themedImage_aIr_ themedImage--dark_RoHN" height="32" width="32"></div><b class="navbar__title">Danyow</b></a><a class="navbar__item navbar__link" href="/blog">博客</a><a class="navbar__item navbar__link" href="/changelog">日志</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/animation-section/animation-section">Unity@2022.1</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next">v0 🚧</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/unity2d/sprites/class-sprite-atlas/sprite-packer">Unity@2022.1</a></li><li><a href="https://62455b8ed3daac0779429a1c--danyow.netlify.app/docs/lua/hello" target="_blank" rel="noopener noreferrer" class="dropdown__link">Lua@5.3<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_GWqj"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a class="dropdown__link" href="/versions">所有版本</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><span><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_NpMu"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg><span>中文</span></span></a><ul class="dropdown__menu"><li><a href="/docs/unity2d/sprites/class-sprite-atlas/sprite-packer" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">中文</a></li><li><a href="/en/docs/unity2d/sprites/class-sprite-atlas/sprite-packer" target="_self" rel="noopener noreferrer" class="dropdown__link">English</a></li><li><a href="https://github.com/danyow/danyow.github.io/issues/3526" target="_blank" rel="noopener noreferrer" class="dropdown__link">Help Us Translate<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_GWqj"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><a href="https://github.com/danyow/danyow.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_IT2h colorModeToggle_o_qc"><button class="clean-btn toggleButton_pGki toggleButtonDisabled_vZLo" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_dYsV"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_WRF1"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_lGmL"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="docPage_zNSk"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_ecpa" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_NEdF"><div class="sidebar_Uz2u sidebarWithHideableNavbar_MFe1"><a tabindex="-1" class="sidebarLogo_iqfm" href="/"><img src="/img/logo.svg" alt="Danyow Logo" class="themedImage_aIr_ themedImage--light_DGIu" height="32" width="32"><img src="/img/logo-dark.svg" alt="Danyow Logo" class="themedImage_aIr_ themedImage--dark_RoHN" height="32" width="32"><b>Danyow</b></a><nav class="menu thin-scrollbar menu_XU2j menuWithAnnouncementBar_vo3y"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/animation-section/animation-section">动画</a><button aria-label="打开/收起侧边栏菜单「动画」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/asset-store/asset-store">Unity Asset Store</a><button aria-label="打开/收起侧边栏菜单「Unity Asset Store」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/asset-workflow/asset-workflow">资源工作流程</a><button aria-label="打开/收起侧边栏菜单「资源工作流程」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/audio/audio">音频</a><button aria-label="打开/收起侧边栏菜单「音频」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/creating-environments/creating-environments">World building</a><button aria-label="打开/收起侧边栏菜单「World building」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/glossary">术语表</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/graphics/graphics">图形</a><button aria-label="打开/收起侧边栏菜单「图形」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/input/input">输入</a><button aria-label="打开/收起侧边栏菜单「输入」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/legacy-topics/legacy-topics">旧版主题</a><button aria-label="打开/收起侧边栏菜单「旧版主题」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/navigation/navigation">导航和寻路</a><button aria-label="打开/收起侧边栏菜单「导航和寻路」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/open-source-repositories/open-source-repositories">开源代码仓库</a><button aria-label="打开/收起侧边栏菜单「开源代码仓库」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/packages-list/packages-list">Packages and feature sets</a><button aria-label="打开/收起侧边栏菜单「Packages and feature sets」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/physics-section/physics-section">物理系统</a><button aria-label="打开/收起侧边栏菜单「物理系统」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/platform-specific/platform-specific">平台开发</a><button aria-label="打开/收起侧边栏菜单「平台开发」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/scripting-section/scripting-section">脚本</a><button aria-label="打开/收起侧边栏菜单「脚本」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/search-overview/search-overview">Unity Search</a><button aria-label="打开/收起侧边栏菜单「Unity Search」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/uitoolkits/uitoolkits">创建用户界面 (UI)</a><button aria-label="打开/收起侧边栏菜单「创建用户界面 (UI)」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/unet/unet">多玩家和联网</a><button aria-label="打开/收起侧边栏菜单「多玩家和联网」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/unity-manual/unity-manual">Unity User Manual 2022.1 (beta)</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/unity-overview/unity-overview">在 Unity 中操作</a><button aria-label="打开/收起侧边栏菜单「在 Unity 中操作」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/unity-services/unity-services">Unity 服务</a><button aria-label="打开/收起侧边栏菜单「Unity 服务」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/unity2d/unity2d">2D</a><button aria-label="打开/收起侧边栏菜单「2D」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/unity2d/2dsorting">2D 排序</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/unity2d/class-tilemap/class-tilemap">Tilemap</a><button aria-label="打开/收起侧边栏菜单「Tilemap」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/unity2d/physics2dreference/physics2dreference">2D 物理系统参考</a><button aria-label="打开/收起侧边栏菜单「2D 物理系统参考」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/unity2d/quickstart2d/quickstart2d">2D game development quickstart guide</a><button aria-label="打开/收起侧边栏菜单「2D game development quickstart guide」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/unity2d/sprites/sprites">精灵</a><button aria-label="打开/收起侧边栏菜单「精灵」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/unity2d/sprites/9slice-sprites">9 切片精灵</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/unity2d/sprites/class-sorting-group">排序组</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/unity2d/sprites/class-sprite-atlas/class-sprite-atlas">精灵图集</a><button aria-label="打开/收起侧边栏菜单「精灵图集」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/unity2d/sprites/class-sprite-atlas/master-variant-atlases/master-variant-atlases">主精灵图集和变体精灵图集</a><button aria-label="打开/收起侧边栏菜单「主精灵图集和变体精灵图集」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/unity2d/sprites/class-sprite-atlas/sprite-atlas-distribution/sprite-atlas-distribution">准备要分发的精灵图集</a><button aria-label="打开/收起侧边栏菜单「准备要分发的精灵图集」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/unity2d/sprites/class-sprite-atlas/sprite-atlas-v2">Sprite Atlas V2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/unity2d/sprites/class-sprite-atlas/sprite-atlas-workflow">精灵图集工作流程</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/unity2d/sprites/class-sprite-atlas/sprite-packer-modes">Sprite Packer 模式</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/unity2d/sprites/class-sprite-atlas/sprite-packer">Sprite Packer</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/unity2d/sprites/class-sprite-mask">精灵遮罩</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/unity2d/sprites/class-sprite-renderer">Sprite Renderer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/unity2d/sprites/class-sprite-shape-renderer">Sprite Shape Renderer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/unity2d/sprites/sprite-creator">Sprite Creator</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/unity2d/sprites/sprite-editor/sprite-editor">Sprite Editor</a><button aria-label="打开/收起侧边栏菜单「Sprite Editor」" type="button" class="clean-btn menu__caret"></button></div></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/video-player/video-player">视频概述</a><button aria-label="打开/收起侧边栏菜单「视频概述」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/xr/xr">XR</a><button aria-label="打开/收起侧边栏菜单「XR」" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="收起侧边栏" aria-label="收起侧边栏" class="button button--secondary button--outline collapseSidebarButton_Essf"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_bqna"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_vJqy"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_ygLL"><div class="docItemContainer_yJzi"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_nmcO" aria-label="breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/">🏠</a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/unity2d/unity2d"><span itemprop="name">2D</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/unity2d/sprites/sprites"><span itemprop="name">精灵</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/unity2d/sprites/class-sprite-atlas/class-sprite-atlas"><span itemprop="name">精灵图集</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="item name">Sprite Packer</span><meta itemprop="position" content="4"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">版本：Unity@2022.1</span><div class="tocCollapsible_aX8Q theme-doc-toc-mobile tocMobile_By44"><button type="button" class="clean-btn tocCollapsibleButton_Va7b">本页总览</button></div><div class="theme-doc-markdown markdown"><h1>Sprite Packer</h1><h2 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="sprite-packer-已弃用">Sprite Packer 已弃用<a class="hash-link" href="#sprite-packer-已弃用" title="标题的直接链接">​</a></h2><p>Please note that  <strong>Sprite Packer</strong>  is deprecated for Unity 2020.1 and newer, and will no longer be available as an option from <a href="/docs/unity2d/sprites/class-sprite-atlas/sprite-packer-modes">Sprite Packer Modes</a>. Existing Projects already using  <strong>Sprite Packer</strong>  will still be able to continue using it, however any new Project created in 2020.1 onwards will default to the <a href="/docs/unity2d/sprites/class-sprite-atlas/class-sprite-atlas">Sprite Atlas</a> system when packing Textures.</p><h2 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="简介">简介<a class="hash-link" href="#简介" title="标题的直接链接">​</a></h2><p>When designing Sprite graphics, it is convenient to work with a separate Texture file for each character. However, a significant portion of a Sprite Texture will often be taken up by the empty space between the graphic elements and this space will result in wasted video memory at runtime. For optimal performance, it is best to pack graphics from several Sprite textures tightly together within a single Texture known as an atlas. Unity provides a  <strong>Sprite Packer</strong>  utility to automate the process of generating atlases from the individual Sprite textures.</p><p>Unity 在后台处理精灵图集纹理的生成和使用，这样用户就不需要进行手动分配。可选择在进入运行模式时或在构建期间打包图集，而图集一旦生成，便会从图集获取精灵对象的图形。</p><p>用户需要在纹理导入器 (Texture Importer) 中指定一个打包标签 (Packing Tag)，从而为该纹理的精灵启用打包。</p><h2 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="使用-sprite-packer">使用 Sprite Packer<a class="hash-link" href="#使用-sprite-packer" title="标题的直接链接">​</a></h2><p>The Sprite Packer is disabled by default but you can configure it from the <a href="/docs/unity-overview/editor-features/comp-manager-group/class-editor-manager">Editor</a> window (menu:  <strong>Edit</strong>  <!-- -->&gt;<!-- -->  <strong>Project Settings</strong> , then select the  <strong>Editor</strong>  category). The Sprite packing mode can be changed from  <strong>Disabled</strong>  to  <strong>Enabled for Builds</strong>  (packing is used for builds but not Play mode) or  <strong>Always Enabled</strong>  (packing is enabled for both Play mode and builds).</p><p>If you open the Sprite Packer window (menu:  <strong>Window</strong>  <!-- -->&gt;<!-- -->  <strong>2D</strong>  <!-- -->&gt;<!-- -->  <strong>Sprite Packer</strong> ) and click the  <strong>Pack</strong>  button in the top-left corner, you will see the arrangement of the textures packed within the atlas.</p><p><img loading="lazy" src="https://docs.unity3d.com/cn/2022.1/uploads/Main/SpritePackerMain.jpg" alt="SpritePackerMain.jpg" class="img_PFMr"></p><p>如果在 Project 面板中选择一个精灵，该精灵也会突出显示以显示其在图集内的位置。轮廓实际上是渲染网格轮廓，还定义了用于紧密打包的区域。</p><p>The toolbar at the top of the Sprite Packer window has a number of controls that affect packing and viewing. The  <strong>Pack</strong>  buttons initiates the packing operation but will not force any update if the atlas hasn’t changed since it was last packed. (A related  <strong>Repack</strong>  button will appear when you implement a custom packing policy as explained in  <strong>Customizing the Sprite Packer</strong>  below). The  <strong>View Atlas</strong>  and  <strong>Page #</strong>  menus allow you to choose which page of which atlas is shown in the window (a single atlas may be split into more than one “page” if there is not enough space for all Sprites in the maximum Texture size). The menu next to the page number selects which “packing policy” is used for the atlas (see below). At the right of the toolbar are two controls to zoom the view and to switch between color and alpha display for the atlas.</p><h2 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="打包策略">打包策略<a class="hash-link" href="#打包策略" title="标题的直接链接">​</a></h2><p>The Sprite Packer uses a  <strong>packing policy</strong>  to decide how to assign Sprites into atlases. It is possible to create your own packing policies (see below) but the  <strong>Default Packer Policy</strong> ,  <strong>Tight Packer Policy</strong>  and  <strong>Tight Rotate Enabled Sprite Packer Policy</strong>  options are always available. With these policies, the  <strong>Packing Tag</strong>  property in the <a href="/docs/graphics/textures/importing-textures/class-texture-importer/class-texture-importer">Texture Importer</a> directly selects the name of the atlas where the Sprite will be packed and so all Sprites with the same packing tag will be packed in the same atlas. Atlases are then further sorted by the Texture import settings so that they match whatever the user sets for the source textures. Sprites with the same Texture compression settings will be grouped into the same atlas where possible.</p><ul><li>DefaultPackerPolicy will use rectangle packing by default unless “<!-- -->[<!-- -->TIGHT<!-- -->]<!-- -->” is specified in the  <strong>Packing Tag</strong>  (i.e. setting your packing tag to “<!-- -->[<!-- -->TIGHT<!-- -->]<!-- -->Character” will allow tight packing).</li><li>TightPackerPolicy will use tight packing by default if Sprite have tight meshes. If “<!-- -->[<!-- -->RECT<!-- -->]<!-- -->” is specified in the  <strong>Packing Tag</strong> , rectangle packing will be done (i.e. setting your packing tag to “<!-- -->[<!-- -->RECT<!-- -->]<!-- -->UI<!-- -->_<!-- -->Elements” will force rect packing).</li><li>TightRotateEnabledSpritePackerPolicy will use tight packing by default if Sprite have tight meshes and will enable rotation of Sprites. If “<!-- -->[<!-- -->RECT<!-- -->]<!-- -->” is specified in the  <strong>Packing Tag</strong> , rectangle packing will be done (i.e. setting your packing tag to “<!-- -->[<!-- -->RECT<!-- -->]<!-- -->UI<!-- -->_<!-- -->Elements” will force rect packing).</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="自定义-sprite-packer">自定义 Sprite Packer<a class="hash-link" href="#自定义-sprite-packer" title="标题的直接链接">​</a></h2><p>The  <strong>DefaultPackerPolicy</strong>  option is sufficient for most purposes but you can also implement your own custom packing policy if you need to. To do this, you need to implement the UnityEditor.Sprites.IPackerPolicy interface for a class in an editor script. This interface requires the following methods:</p><ul><li>GetVersion - 返回打包策略的版本值。如果对策略脚本进行了修改，则应该更换版本，并且此策略将保存到版本控制系统。</li><li>OnGroupAtlases - 在此处实现打包逻辑。在 PackerJob 上定义图集，并从给定的 TextureImporter 分配精灵。</li></ul><p>DefaultPackerPolicy 默认使用矩形打包（请参阅 SpritePackingMode）。如果正在创建纹理空间效果或想要使用不同的网格来渲染精灵，此设置将非常有用。自定义策略可覆盖此设置，并改用紧密打包。</p><ul><li>仅在选择自定义策略时才会启用 Repack 按钮。<ul><li>除非 TextureImporter 元数据或所选的 PackerPolicy 版本值发生变化，否则不会调用 OnGroupAtlases。</li><li>仅在实施自定义策略时才应使用 Repack 按钮。</li></ul></li><li>可使用 TightRotateEnabledSpritePackerPolicy 自动对精灵打包并旋转。<ul><li>SpritePackingRotation 是保留供未来 Unity 版本使用的类型。</li></ul></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="其他">其他<a class="hash-link" href="#其他" title="标题的直接链接">​</a></h2><ul><li>图集缓存在 Project<!-- -->\<!-- -->Library<!-- -->\<!-- -->AtlasCache 中。<ul><li>删除此文件夹再启动 Unity 将强制对图集重新打包。这样做时必须关闭 Unity。</li></ul></li><li>启动时不加载图集缓存。<ul><li>重新启动 Unity 后首次打包时必须选中所有纹理。此操作可能需要一些时间，具体取决于项目中的纹理总数。</li><li>仅加载必需的图集。</li></ul></li><li>默认最大图集大小为 2048x2048。</li><li>如果设置了 PackingTag，则不会压缩纹理，这样 SpritePacker 就可以获取原始像素值，然后对图集进行压缩。</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="defaultpackerpolicy">DefaultPackerPolicy<a class="hash-link" href="#defaultpackerpolicy" title="标题的直接链接">​</a></h2><div class="codeBlockContainer_CBWl theme-code-block"><div class="codeBlockContent_vhl8" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_w2AC thin-scrollbar"><code class="codeBlockLines_OfWd"><span class="token-line" style="color:#393A34"><span class="token plain">using System;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using System.Linq;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using UnityEngine;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using UnityEditor;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using System.Collections.Generic;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class DefaultPackerPolicySample : UnityEditor.Sprites.IPackerPolicy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        protected class Entry</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            public Sprite            Sprite;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public UnityEditor.Sprites.AtlasSettings settings;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            public string            atlasName;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            public SpritePackingMode packingMode;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            public int               anisoLevel;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private const uint kDefaultPaddingPower = 3; // 适用于基础和两个 Mip 级别。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public virtual int GetVersion() { return 1; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        protected virtual string TagPrefix { get { return &quot;[TIGHT]&quot;; } }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        protected virtual bool AllowTightWhenTagged { get { return true; } }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        protected virtual bool AllowRotationFlipping { get { return false; } }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static bool IsCompressedFormat(TextureFormat fmt)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (fmt &amp;gt;= TextureFormat.DXT1 &amp;&amp; fmt &amp;lt;= TextureFormat.DXT5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (fmt &amp;gt;= TextureFormat.DXT1Crunched &amp;&amp; fmt &amp;lt;= TextureFormat.DXT5Crunched)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (fmt &amp;gt;= TextureFormat.PVRTC_RGB2 &amp;&amp; fmt &amp;lt;= TextureFormat.PVRTC_RGBA4)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (fmt == TextureFormat.ETC_RGB4)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (fmt &amp;gt;= TextureFormat.ATC_RGB4 &amp;&amp; fmt &amp;lt;= TextureFormat.ATC_RGBA8)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (fmt &amp;gt;= TextureFormat.EAC_R &amp;&amp; fmt &amp;lt;= TextureFormat.EAC_RG_SIGNED)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (fmt &amp;gt;= TextureFormat.ETC2_RGB &amp;&amp; fmt &amp;lt;= TextureFormat.ETC2_RGBA8)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (fmt &amp;gt;= TextureFormat.ASTC_RGB_4x4 &amp;&amp; fmt &amp;lt;= TextureFormat.ASTC_RGBA_12x12)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (fmt &amp;gt;= TextureFormat.DXT1Crunched &amp;&amp; fmt &amp;lt;= TextureFormat.DXT5Crunched)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void OnGroupAtlases(BuildTarget target, UnityEditor.Sprites.PackerJob job, int[] textureImporterInstanceIDs)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            List&amp;lt;Entry&amp;gt; entries = new List&amp;lt;Entry&amp;gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            foreach (int instanceID in textureImporterInstanceIDs)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                TextureImporter ti = EditorUtility.InstanceIDToObject(instanceID) as TextureImporter;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                TextureFormat desiredFormat;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ColorSpace colorSpace;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                int compressionQuality;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ti.ReadTextureImportInstructions(target, out desiredFormat, out colorSpace, out compressionQuality);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                TextureImporterSettings tis = new TextureImporterSettings();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ti.ReadTextureSettings(tis);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Sprite[] Sprites =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                AssetDatabase.LoadAllAssetRepresentationsAtPath(ti.assetPath)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .Select(x =&amp;gt; x as Sprite)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .Where(x =&amp;gt; x != null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .ToArray();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                foreach (Sprite Sprite in Sprites)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    Entry entry = new Entry();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    entry.Sprite = Sprite;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    entry.settings.format = desiredFormat;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    entry.settings.colorSpace = colorSpace;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    // 之后仅针对压缩格式使用压缩质量进行分组。否则将其留空。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                entry.settings.compressionQuality = IsCompressedFormat(desiredFormat) ? compressionQuality : 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                entry.settings.filterMode = Enum.IsDefined(typeof(FilterMode), ti.filterMode)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    ? ti.filterMode</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    : FilterMode.Bilinear;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    entry.settings.maxWidth = 2048;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    entry.settings.maxHeight = 2048;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    entry.settings.generateMipMaps = ti.mipmapEnabled;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    entry.settings.enableRotation = AllowRotationFlipping;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    if (ti.mipmapEnabled)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        entry.settings.paddingPower = kDefaultPaddingPower;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        entry.settings.paddingPower = (uint)EditorSettings.SpritePackerPaddingPower;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    #if ENABLE_ANDROID_ATLAS_ETC1_COMPRESSION</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        entry.settings.allowsAlphaSplitting = ti.GetAllowsAlphaSplitting ();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    #endif //ENABLE_ANDROID_ATLAS_ETC1_COMPRESSION</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    entry.atlasName = ParseAtlasName(ti.SpritePackingTag);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    entry.packingMode = GetPackingMode(ti.SpritePackingTag, tis.SpriteMeshType);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    entry.anisoLevel = ti.anisoLevel;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    entries.Add(entry);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Resources.UnloadAsset(ti);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 首先根据图集名称将精灵分成几组</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            var atlasGroups =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                from e in entries</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                group e by e.atlasName;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            foreach (var atlasGroup in atlasGroups)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                int page = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // 然后根据纹理设置将这些组分成更小的组</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                var settingsGroups =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    from t in atlasGroup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    group t by t.settings;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                foreach (var settingsGroup in settingsGroups)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    string atlasName = atlasGroup.Key;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    if (settingsGroups.Count() &amp;gt; 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        atlasName += string.Format(&quot; (Group {0})&quot;, page);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                UnityEditor.Sprites.AtlasSettings settings = settingsGroup.Key;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    settings.anisoLevel = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    // 使用此图集中所有条目的最高 aniso 级别</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    if (settings.generateMipMaps)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        foreach (Entry entry in settingsGroup)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            if (entry.anisoLevel &amp;gt; settings.anisoLevel)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                settings.anisoLevel = entry.anisoLevel;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    job.AddAtlas(atlasName, settings);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    foreach (Entry entry in settingsGroup)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        job.AssignToAtlas(atlasName, entry.Sprite, entry.packingMode, SpritePackingRotation.None);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    ++page;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        protected bool IsTagPrefixed(string packingTag)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            packingTag = packingTag.Trim();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (packingTag.Length &amp;lt; TagPrefix.Length)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                return false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return (packingTag.Substring(0, TagPrefix.Length) == TagPrefix);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private string ParseAtlasName(string packingTag)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            string name = packingTag.Trim();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (IsTagPrefixed(name))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                name = name.Substring(TagPrefix.Length).Trim();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return (name.Length == 0) ?&quot;(unnamed)&quot; : name;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private SpritePackingMode GetPackingMode(string packingTag, SpriteMeshType meshType)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (meshType == SpriteMeshType.Tight)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if (IsTagPrefixed(packingTag) == AllowTightWhenTagged)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    return SpritePackingMode.Tight;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return SpritePackingMode.Rectangle;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" title="复制" class="copyButton_R7VQ clean-btn"><span class="copyButtonIcons_Uqyx" aria-hidden="true"><svg class="copyButtonIcon_CtfL" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Mq1p" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="tightpackerpolicy">TightPackerPolicy<a class="hash-link" href="#tightpackerpolicy" title="标题的直接链接">​</a></h2><div class="codeBlockContainer_CBWl theme-code-block"><div class="codeBlockContent_vhl8" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_w2AC thin-scrollbar"><code class="codeBlockLines_OfWd"><span class="token-line" style="color:#393A34"><span class="token plain">using System;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using System.Linq;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using UnityEngine;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using UnityEditor;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using UnityEditor.Sprites;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using System.Collections.Generic;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 除非打包标签包含 &quot;[RECT]&quot;，否则 TightPackerPolicy 将对非矩形精灵进行紧密打包。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class TightPackerPolicySample : DefaultPackerPolicySample</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        protected override string TagPrefix { get { return &quot;[RECT]&quot;; } }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        protected override bool AllowTightWhenTagged { get { return false; } }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        protected override bool AllowRotationFlipping { get { return false; } }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" title="复制" class="copyButton_R7VQ clean-btn"><span class="copyButtonIcons_Uqyx" aria-hidden="true"><svg class="copyButtonIcon_CtfL" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Mq1p" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="tightrotateenabledspritepackerpolicy">TightRotateEnabledSpritePackerPolicy<a class="hash-link" href="#tightrotateenabledspritepackerpolicy" title="标题的直接链接">​</a></h2><p>`<!-- -->`<!-- -->`<!-- -->`<!-- --> using System; using System.Linq; using UnityEngine; using UnityEditor; using UnityEditor.Sprites; using System.Collections.Generic;</p><p>// TightPackerPolicy will tightly pack non-rectangle Sprites unless their packing tag contains “<!-- -->[<!-- -->RECT<!-- -->]<!-- -->”. class TightRotateEnabledSpritePackerPolicySample : DefaultPackerPolicySample { protected override string TagPrefix { get { return “<!-- -->[<!-- -->RECT<!-- -->]<!-- -->”; } } protected override bool AllowTightWhenTagged { get { return false; } } protected override bool AllowRotationFlipping { get { return true; } } }</p><hr><ul><li>Sprite Packer deprecated in <a href="https://docs.unity3d.com/2020.1/Documentation/Manual/30_search.html?q=newin20201" target="_blank" rel="noopener noreferrer">2020.1</a> NewIn20191</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://crowdin.com/project/docusaurus-v2/zh-Hans" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_OMbO" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_vA0S"><span class="theme-last-updated">最后<!-- -->由 <b>danyow</b> <!-- -->于 <b><time datetime="2022-03-31T15:56:20.000Z">2022/3/31</time></b> <!-- -->更新</span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/unity2d/sprites/class-sprite-atlas/sprite-packer-modes"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">Sprite Packer 模式</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/unity2d/sprites/class-sprite-mask"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">精灵遮罩</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_jWtb thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#sprite-packer-已弃用" class="table-of-contents__link toc-highlight">Sprite Packer 已弃用</a></li><li><a href="#简介" class="table-of-contents__link toc-highlight">简介</a></li><li><a href="#使用-sprite-packer" class="table-of-contents__link toc-highlight">使用 Sprite Packer</a></li><li><a href="#打包策略" class="table-of-contents__link toc-highlight">打包策略</a></li><li><a href="#自定义-sprite-packer" class="table-of-contents__link toc-highlight">自定义 Sprite Packer</a></li><li><a href="#其他" class="table-of-contents__link toc-highlight">其他</a></li><li><a href="#defaultpackerpolicy" class="table-of-contents__link toc-highlight">DefaultPackerPolicy</a></li><li><a href="#tightpackerpolicy" class="table-of-contents__link toc-highlight">TightPackerPolicy</a></li><li><a href="#tightrotateenabledspritepackerpolicy" class="table-of-contents__link toc-highlight">TightRotateEnabledSpritePackerPolicy</a></li></ul></div></div></div></div></main></div></div></div>
<script src="/assets/js/runtime~main.4e562e6e.js"></script>
<script src="/assets/js/main.9af7a4d9.js"></script>
</body>
</html>