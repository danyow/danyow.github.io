<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper docs-doc-page docs-version-Unity@2022.1 plugin-docs plugin-id-default docs-doc-id-unity/unity-overview/analysis/profiler/应用程序性能分析">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Danyow RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Danyow Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title="Danyow JSON Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-141789564-1"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-141789564-1",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Danyow" href="/opensearch.xml">
<link rel="alternate" type="application/rss+xml" href="/changelog/rss.xml" title="日志 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/changelog/atom.xml" title="日志 Atom Feed">
<link rel="alternate" type="application/json" href="/changelog/feed.json" title="日志 JSON Feed">
<link rel="icon" href="/img/logo.png">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="rgb(37, 194, 160)">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">
<link rel="apple-touch-icon" href="/img/logo.png">
<link rel="mask-icon" href="/img/logo.png" color="rgb(62, 204, 94)">
<meta name="msapplication-TileImage" content="/img/logo.png">
<meta name="msapplication-TileColor" content="#000">
<link rel="stylesheet" href="/katex/katex.min.css"><title data-rh="true">应用程序性能分析 | Danyow</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://danyow.github.io/docs/unity-overview/analysis/profiler/profiler-profiling-applications"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="Unity@2022.1"><meta data-rh="true" name="docusaurus_tag" content="docs-default-Unity@2022.1"><meta data-rh="true" name="docsearch:version" content="Unity@2022.1"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-Unity@2022.1"><meta data-rh="true" property="og:title" content="应用程序性能分析 | Danyow"><meta data-rh="true" name="description" content="使用 Unity 性能分析器对应用程序进行性能分析时，可以通过三种主要方式记录数据："><meta data-rh="true" property="og:description" content="使用 Unity 性能分析器对应用程序进行性能分析时，可以通过三种主要方式记录数据："><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://danyow.github.io/docs/unity-overview/analysis/profiler/profiler-profiling-applications"><link data-rh="true" rel="alternate" href="https://danyow.github.io/docs/unity-overview/analysis/profiler/profiler-profiling-applications" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://danyow.github.io/en/docs/unity-overview/analysis/profiler/profiler-profiling-applications" hreflang="en"><link data-rh="true" rel="alternate" href="https://danyow.github.io/docs/unity-overview/analysis/profiler/profiler-profiling-applications" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://S3KRFC060Q-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.bff76bc0.css">
<link rel="preload" href="/assets/js/runtime~main.4e562e6e.js" as="script">
<link rel="preload" href="/assets/js/main.9af7a4d9.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_BxGa">跳到主要内容</a></div><div class="announcementBar_yyVl" role="banner"><div class="announcementBarPlaceholder_Il1w"></div><div class="announcementBarContent_KFU1">⭐️ If you like, give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/danyow/danyow.github.io">GitHub</a> </div><button type="button" class="clean-btn close announcementBarClose_axA0" aria-label="关闭"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top navbarHideable_FcXi"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Danyow Logo" class="themedImage_aIr_ themedImage--light_DGIu" height="32" width="32"><img src="/img/logo-dark.svg" alt="Danyow Logo" class="themedImage_aIr_ themedImage--dark_RoHN" height="32" width="32"></div><b class="navbar__title">Danyow</b></a><a class="navbar__item navbar__link" href="/blog">博客</a><a class="navbar__item navbar__link" href="/changelog">日志</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/animation-section/animation-section">Unity@2022.1</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next">v0 🚧</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/unity-overview/analysis/profiler/profiler-profiling-applications">Unity@2022.1</a></li><li><a href="https://62455b8ed3daac0779429a1c--danyow.netlify.app/docs/lua/hello" target="_blank" rel="noopener noreferrer" class="dropdown__link">Lua@5.3<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_GWqj"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a class="dropdown__link" href="/versions">所有版本</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><span><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_NpMu"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg><span>中文</span></span></a><ul class="dropdown__menu"><li><a href="/docs/unity-overview/analysis/profiler/profiler-profiling-applications" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">中文</a></li><li><a href="/en/docs/unity-overview/analysis/profiler/profiler-profiling-applications" target="_self" rel="noopener noreferrer" class="dropdown__link">English</a></li><li><a href="https://github.com/danyow/danyow.github.io/issues/3526" target="_blank" rel="noopener noreferrer" class="dropdown__link">Help Us Translate<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_GWqj"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><a href="https://github.com/danyow/danyow.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_IT2h colorModeToggle_o_qc"><button class="clean-btn toggleButton_pGki toggleButtonDisabled_vZLo" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_dYsV"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_WRF1"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_lGmL"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="docPage_zNSk"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_ecpa" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_NEdF"><div class="sidebar_Uz2u sidebarWithHideableNavbar_MFe1"><a tabindex="-1" class="sidebarLogo_iqfm" href="/"><img src="/img/logo.svg" alt="Danyow Logo" class="themedImage_aIr_ themedImage--light_DGIu" height="32" width="32"><img src="/img/logo-dark.svg" alt="Danyow Logo" class="themedImage_aIr_ themedImage--dark_RoHN" height="32" width="32"><b>Danyow</b></a><nav class="menu thin-scrollbar menu_XU2j menuWithAnnouncementBar_vo3y"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/animation-section/animation-section">动画</a><button aria-label="打开/收起侧边栏菜单「动画」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/asset-store/asset-store">Unity Asset Store</a><button aria-label="打开/收起侧边栏菜单「Unity Asset Store」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/asset-workflow/asset-workflow">资源工作流程</a><button aria-label="打开/收起侧边栏菜单「资源工作流程」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/audio/audio">音频</a><button aria-label="打开/收起侧边栏菜单「音频」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/creating-environments/creating-environments">World building</a><button aria-label="打开/收起侧边栏菜单「World building」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/glossary">术语表</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/graphics/graphics">图形</a><button aria-label="打开/收起侧边栏菜单「图形」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/input/input">输入</a><button aria-label="打开/收起侧边栏菜单「输入」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/legacy-topics/legacy-topics">旧版主题</a><button aria-label="打开/收起侧边栏菜单「旧版主题」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/navigation/navigation">导航和寻路</a><button aria-label="打开/收起侧边栏菜单「导航和寻路」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/open-source-repositories/open-source-repositories">开源代码仓库</a><button aria-label="打开/收起侧边栏菜单「开源代码仓库」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/packages-list/packages-list">Packages and feature sets</a><button aria-label="打开/收起侧边栏菜单「Packages and feature sets」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/physics-section/physics-section">物理系统</a><button aria-label="打开/收起侧边栏菜单「物理系统」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/platform-specific/platform-specific">平台开发</a><button aria-label="打开/收起侧边栏菜单「平台开发」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/scripting-section/scripting-section">脚本</a><button aria-label="打开/收起侧边栏菜单「脚本」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/search-overview/search-overview">Unity Search</a><button aria-label="打开/收起侧边栏菜单「Unity Search」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/uitoolkits/uitoolkits">创建用户界面 (UI)</a><button aria-label="打开/收起侧边栏菜单「创建用户界面 (UI)」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/unet/unet">多玩家和联网</a><button aria-label="打开/收起侧边栏菜单「多玩家和联网」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/unity-manual/unity-manual">Unity User Manual 2022.1 (beta)</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/unity-overview/unity-overview">在 Unity 中操作</a><button aria-label="打开/收起侧边栏菜单「在 Unity 中操作」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/unity-overview/analysis/analysis">分析</a><button aria-label="打开/收起侧边栏菜单「分析」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/unity-overview/analysis/async-read-manager-metrics">资源加载指标</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/unity-overview/analysis/best-practice-understanding-performance-in-unity/best-practice-understanding-performance-in-unity">了解 Unity 中的优化</a><button aria-label="打开/收起侧边栏菜单「了解 Unity 中的优化」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/unity-overview/analysis/log-files">Log files</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/unity-overview/analysis/performance-memory-overview/performance-memory-overview">Memory in Unity</a><button aria-label="打开/收起侧边栏菜单「Memory in Unity」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/unity-overview/analysis/performance-profiling-tools/performance-profiling-tools">Profiling tools</a><button aria-label="打开/收起侧边栏菜单「Profiling tools」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/unity-overview/analysis/profiler/profiler">性能分析器概述</a><button aria-label="打开/收起侧边栏菜单「性能分析器概述」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/unity-overview/analysis/profiler/low-level-native-plugin-profiler">低级原生插件 Profiler API</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/unity-overview/analysis/profiler/profiler-customizing/profiler-customizing">Customizing the Profiler</a><button aria-label="打开/收起侧边栏菜单「Customizing the Profiler」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/unity-overview/analysis/profiler/profiler-markers">常见性能分析器标记</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/unity-overview/analysis/profiler/profiler-profiling-applications">应用程序性能分析</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/unity-overview/analysis/profiler/profiler-window/profiler-window">Profiler 窗口</a><button aria-label="打开/收起侧边栏菜单「Profiler 窗口」" type="button" class="clean-btn menu__caret"></button></div></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/unity-overview/creating-gameplay/creating-gameplay">创建游戏玩法</a><button aria-label="打开/收起侧边栏菜单「创建游戏玩法」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/unity-overview/editor-features/editor-features">编辑器功能</a><button aria-label="打开/收起侧边栏菜单「编辑器功能」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/unity-overview/getting-started-installing-unity/getting-started-installing-unity">安装 Unity</a><button aria-label="打开/收起侧边栏菜单「安装 Unity」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/unity-overview/quickstart-guides/quickstart-guides">Quickstart guides</a><button aria-label="打开/收起侧边栏菜单「Quickstart guides」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/unity-overview/upgrade-guides/upgrade-guides">升级 Unity</a><button aria-label="打开/收起侧边栏菜单「升级 Unity」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/unity-overview/using-the-editor/using-the-editor">Unity 的界面</a><button aria-label="打开/收起侧边栏菜单「Unity 的界面」" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/unity-services/unity-services">Unity 服务</a><button aria-label="打开/收起侧边栏菜单「Unity 服务」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/unity2d/unity2d">2D</a><button aria-label="打开/收起侧边栏菜单「2D」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/video-player/video-player">视频概述</a><button aria-label="打开/收起侧边栏菜单「视频概述」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/xr/xr">XR</a><button aria-label="打开/收起侧边栏菜单「XR」" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="收起侧边栏" aria-label="收起侧边栏" class="button button--secondary button--outline collapseSidebarButton_Essf"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_bqna"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_vJqy"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_ygLL"><div class="docItemContainer_yJzi"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_nmcO" aria-label="breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/">🏠</a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/unity-overview/unity-overview"><span itemprop="name">在 Unity 中操作</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/unity-overview/analysis/analysis"><span itemprop="name">分析</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/unity-overview/analysis/profiler/profiler"><span itemprop="name">性能分析器概述</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="item name">应用程序性能分析</span><meta itemprop="position" content="4"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">版本：Unity@2022.1</span><div class="tocCollapsible_aX8Q theme-doc-toc-mobile tocMobile_By44"><button type="button" class="clean-btn tocCollapsibleButton_Va7b">本页总览</button></div><div class="theme-doc-markdown markdown"><h1>应用程序性能分析</h1><p>使用 <a href="/docs/unity-overview/analysis/profiler/profiler">Unity 性能分析器</a>对应用程序进行性能分析时，可以通过三种主要方式记录数据：</p><ul><li>在目标平台上的播放器中对应用程序进行性能分析</li><li>在 Unity 编辑器中以运行模式对应用程序进行性能分析</li><li>对 Unity 编辑器进行性能分析</li></ul><p>获得有关应用程序的准确时序的最佳方法是在打算发布它的终端平台上对它进行性能分析。这样可提供有关影响应用程序性能的因素的准确时序。</p><p>但是，每次要改进其性能元素时都构建应用程序可能会非常耗时。因此，要快速评估应用程序的性能，可以直接在编辑器中以运行模式对它进行性能分析。在运行模式下进行性能分析不会准确反映应用程序在真实设备上表现出的性能，但它是一个有用的工具，可在终端平台上进行初始分析后快速检查进行的更改是否可提高应用程序的性能。</p><p>Unity 编辑器可能会影响应用程序的性能，因为它在运行模式下运行时使用与应用程序相同的资源，因此还可以单独对编辑器进行性能分析以确定它使用的资源。如果应用程序仅设计为在运行模式下工作（例如用于电影制作），这会特别有用。</p><h2 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="profile-your-application-on-a-target-platform">Profile your application on a target platform<a class="hash-link" href="#profile-your-application-on-a-target-platform" title="标题的直接链接">​</a></h2><p>要在目标发布平台上分析您的应用程序，请将目标设备连接到网络或通过线缆直接连接到计算机。还可以通过 IP 地址连接到设备。只能以 <strong>开发版</strong> 形式对应用程序进行性能分析。要进行此设置，请打开  <strong>Build Settings</strong> （菜单： <strong>File</strong>  <!-- -->&gt;<!-- -->  <strong>Build Settings</strong> ），然后选择应用程序的目标平台。启用  <strong>Development Build</strong>  设置。启用此设置后，与性能分析器相关的以下两个设置将变为可用状态： <strong>Autoconnect to Profiler</strong>  和  <strong>Deep Profiling Support</strong> 。</p><p><img loading="lazy" src="https://docs.unity3d.com/cn/2022.1/uploads/Main/profiler-build-settings.png" alt="Build Settings 窗口，已启用性能分析选项" class="img_PFMr"></p><p>Build Settings 窗口，已启用性能分析选项</p><p>启用  <strong>Autoconnect Profiler</strong>  设置后，Unity 编辑器在构建过程中将自己的 IP 地址烘焙到已构建的播放器中。播放器启动时会尝试连接到位于所烘焙 IP 地址的编辑器中的性能分析器。</p><p>如果还启用了  <strong>Deep Profiling Support</strong>  设置，Unity 会在构建的播放器启动时执行<a href="/docs/unity-overview/analysis/profiler/profiler-window/profiler-window#%E6%B7%B1%E5%BA%A6%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90">深度性能分析</a>，这意味着性能分析器会对代码的每个部分进行性能分析，而不仅仅是在 <a href="https://docs.unity3d.com/cn/2022.1/ScriptReference/Unity.Profiling.ProfilerMarker.html" target="_blank" rel="noopener noreferrer">ProfilerMarker</a> 中显式包裹的代码时序。这对于获取有关应用程序启动时间的深度性能分析信息很有用，但是，这会为构建增加少量开销。</p><h3 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="在-profiler-窗口中连接到播放器">在 Profiler 窗口中连接到播放器<a class="hash-link" href="#在-profiler-窗口中连接到播放器" title="标题的直接链接">​</a></h3><p>To use the Profiler to manually connect to a platform running your application, configure the settings in the  <strong>Attach to Player</strong>  drop-down. You can only do this if  <strong>Autoconnect Profiler</strong>  is disabled.</p><p>For a platform to appear in the Attach to Player drop-down it must meet the following requirements:</p><ul><li>The platform is visible on your local network or directly connected to your local machine by cable.</li><li>The platform is running a player that you built with the Development Build option enabled. For instructions on how to enable this setting for a platform, see <a href="#profile-your-application-on-a-target-platform">Profile your application on a target platform</a>.</li><li>The platform is running your Player.</li></ul><p>The  <strong>Attach to Playe</strong> r drop-down displays all Unity Players that Unity detects through the network or by direct connection. You can identify these Players by  <strong>Player Name</strong>  and the  <strong>Product Name</strong>  that is running the Player (for example, “iPhonePlayer (My iPhone)”).</p><p>You can also connect to a Player directly via its IP address. To do this, select the  <strong>Attach to Player</strong>  menu, and then select  <strong>&lt;<!-- -->Enter IP<!-- -->&gt;</strong>  in the dropdown. In the dialog box that appears, type the IP address and (optionally) the port of the Player you want to connect to.</p><p>To collect profiling information on your application, select the Player from the dropdown menu, and then click  <strong>Record</strong> .</p><p>To continuously collect data while your application runs, enable the  <strong>Run In Background</strong>  setting in Player Settings (menu:  <strong>Edit</strong>  <!-- -->&gt;<!-- -->  <strong>Project Settings</strong>  <!-- -->&gt;<!-- -->  <strong>Player</strong>  <!-- -->&gt;<!-- -->  <strong>Resolution and Presentation</strong> ). When you enable this setting, the Profiler collects data even when you leave your application running in the background. If you disable it, the Profiler only collects data when the application is running in an active window.</p><h3 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="using-the-attach-to-player-search-bar">Using the Attach to Player search bar<a class="hash-link" href="#using-the-attach-to-player-search-bar" title="标题的直接链接">​</a></h3><p>The  <strong>Attach to Player</strong>  drop down includes a search bar that you can use to find information about your Player. You can search by  <strong>Player Name</strong>  or device category, for example  <strong>Remote</strong> . When you search by category, the result displays all devices in that category.</p><p>Select the name of a development Player to view it in the profiler.</p><h3 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="attach-to-player-properties">Attach to Player properties<a class="hash-link" href="#attach-to-player-properties" title="标题的直接链接">​</a></h3><p><img loading="lazy" src="https://docs.unity3d.com/cn/2022.1/uploads/Main/attach-to-player.png" alt="attach-to-player.png" class="img_PFMr"></p><p>Each column provides the following information about when it is available:</p><table><thead><tr><th><strong>属性：</strong></th><th><strong>描述：</strong></th></tr></thead><tbody><tr><td><strong>Player Name</strong></td><td>The name of the device that is running your application.<br><br>To change this name, navigate to  <strong>Edit</strong>  <!-- -->&gt;<!-- -->  <strong>Preferences</strong>  <!-- -->&gt;<!-- -->  <strong>Analysis</strong>  <!-- -->&gt;<!-- -->  <strong>Profiler</strong>  and enter your desired name in the  <strong>Custom Connection ID</strong>  field.<br><br>You can also set a Player Name set when you launch a Player from the command line using the <code>-connection-id</code> argument.<br><br>For more information about the categories in this property, see <a href="#player-name-device-categories">Player name device categories</a></td></tr><tr><td><strong>Product Name</strong></td><td>This is the value of the field that you set in  <strong>Project</strong>  <!-- -->&gt;<!-- -->  <strong>PlayerSettings</strong> .</td></tr><tr><td><strong>IP</strong></td><td>The IP address of the Player.</td></tr><tr><td><strong>Port</strong></td><td>The port of the Player.</td></tr></tbody></table><h3 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="player-name-device-categories">Player name device categories<a class="hash-link" href="#player-name-device-categories" title="标题的直接链接">​</a></h3><p>The  <strong>Player Name</strong>  category includes the following categories that display information about particular device types:</p><table><thead><tr><th><strong>属性：</strong></th><th><strong>描述：</strong></th></tr></thead><tbody><tr><td><strong>Play Mode</strong></td><td>Select this property to profile your application in Play Mode.</td></tr><tr><td><strong>Edit Mode</strong></td><td>Select this property to profile the Unity Editor.</td></tr><tr><td><strong>Local</strong></td><td>This list contains any device that is running on the local machine, in the Unity Editor or in a standalone player.<br><br>It also displays information for players that are physically connected to the host machine with a cable.</td></tr><tr><td><strong>Remote</strong></td><td>This section displays information for devices running on the local network.<br><br>This section only appears when Unity finds a remote device running on the local network.</td></tr><tr><td><strong>Connections without ID</strong></td><td>This section only appears when Unity finds a device running a player older than Unity 2021.2. <br> These players do not have  <strong>Product Name</strong> ,  <strong>IP</strong> , or  <strong>Port</strong>  information.</td></tr><tr><td><strong>Direct Connection</strong></td><td>Use this option to connect to a specific IP and port combination. This category displays the most recent IP you connected to.</td></tr></tbody></table><h3 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="平台特定性能分析指南">平台特定性能分析指南<a class="hash-link" href="#平台特定性能分析指南" title="标题的直接链接">​</a></h3><p>将不同平台连接到 Unity 性能分析器时，它们会具有不同的行为方式。以下部分提供有关每个平台的一些常见行为的指导：</p><h4 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="webgl">WebGL<a class="hash-link" href="#webgl" title="标题的直接链接">​</a></h4><p>可以在 WebGL 中使用 Unity 性能分析器，但不能通过编辑器连接到使用 WebGL 构建的正在运行的播放器。这是因为 WebGL 使用 WebSocket 进行通信，所以不允许浏览器端的传入连接。要连接到运行的播放器，必须在  <strong>Build Settings</strong> （菜单： <strong>File</strong>  <!-- -->&gt;<!-- -->  <strong>Build Settings</strong> ）中启用  <strong>Autoconnect Profiler</strong>  复选框。Unity 无法对 WebGL 的绘制调用进行性能分析。</p><h4 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="移动设备上的性能分析">移动设备上的性能分析<a class="hash-link" href="#移动设备上的性能分析" title="标题的直接链接">​</a></h4><p>iOS 和 Android 设备均支持通过网络进行远程性能分析。如果使用了防火墙，请在防火墙的出站规则中开放端口 54998 至 55511。这些是 Unity 用于远程性能分析的端口。</p><p>有时，在设置远程性能分析后，Unity 编辑器可能无法自动连接到设备。如果发生此情况，可以手动发起性能分析器连接。为此，请选择 Profiler 窗口中的  <strong>Attach to Player</strong>  下拉菜单，然后选择相应设备。</p><p>也可以将目标设备直接插入计算机以避免网络或连接问题。</p><h5 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="ios-远程性能分析">iOS 远程性能分析<a class="hash-link" href="#ios-远程性能分析" title="标题的直接链接">​</a></h5><p>要对 iOS 设备启用远程性能分析，请遵循以下步骤：</p><p>1.将 iOS 设备连接到 WiFi 网络。性能分析器会使用本地 WiFi 网络将性能分析数据从设备发送到 Unity Editor。 1.通过线缆将设备连接到计算机。打开 Build Settings（菜单： <strong>File</strong>  <!-- -->&gt;<!-- -->  <strong>Build Settings</strong> ），选中  <strong>Development Build</strong>  和  <strong>Autoconnect Profiler</strong>  复选框，然后选择  <strong>Build &amp; Run</strong> 。 1.应用程序在设备上启动时，请在 Unity 编辑器中打开 Profiler 窗口（菜单： <strong>Window</strong>  <!-- -->&gt;<!-- -->  <strong>Analysis</strong>  <!-- -->&gt;<!-- -->  <strong>Profiler</strong> ）。</p><h5 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="android-远程性能分析">Android 远程性能分析<a class="hash-link" href="#android-远程性能分析" title="标题的直接链接">​</a></h5><p>Android 设备支持两种远程性能分析方法：通过 WiFi 或通过 <a href="https://developer.android.com/studio/command-line/adb" target="_blank" rel="noopener noreferrer">Android Debug Bridge (adb)</a>。</p><p>要进行 WiFi 性能分析，请遵循以下步骤：</p><p>1.在 Android 设备上禁用移动数据。 1.将 Android 设备连接到 WiFi 网络。性能分析器会使用本地 WiFi 网络将性能分析数据从设备发送到 Unity Editor。 1.通过线缆将设备连接到计算机。打开 Build Settings（菜单： <strong>File</strong>  <!-- -->&gt;<!-- -->  <strong>Build Settings</strong> ），选中  <strong>Development Build</strong>  和  <strong>Autoconnect Profiler</strong>  复选框，然后选择  <strong>Build &amp; Run</strong> 。 1.应用程序在设备上启动时，请在 Unity 编辑器中打开 Profiler 窗口（菜单： <strong>Window</strong>  <!-- -->&gt;<!-- -->  <strong>Analysis</strong>  <!-- -->&gt;<!-- -->  <strong>Profiler</strong> ）。</p><p> <strong>注意</strong> ：Android 设备和主机（运行 Unity 编辑器）必须位于同一子网上才能正常进行设备检测。</p><p>要进行 Android Debug Bridge (adb) 性能分析，请遵循以下步骤：</p><p>1.确保设备处于 <strong>开发模式</strong> 并启用  <strong>USB debugging</strong>  设置 1.通过线缆将设备连接到计算机，并确保在 adb 设备列表中显示了该设备。 1.打开 Build Settings（菜单： <strong>File</strong>  <!-- -->&gt;<!-- -->  <strong>Build Settings</strong> ），选中  <strong>Development Build</strong>  复选框，然后选择  <strong>Build &amp; Run</strong> 。 1.应用程序在设备上启动时，请在 Unity 编辑器中打开 Profiler 窗口（菜单： <strong>Window</strong>  <!-- -->&gt;<!-- -->  <strong>Analysis</strong>  <!-- -->&gt;<!-- -->  <strong>Profiler</strong> ）。 1.从  <strong>Attach to Player</strong>  下拉菜单中，选择  <strong>AndroidProfiler(<a href="mailto:ADB@127.0.0.1" target="_blank" rel="noopener noreferrer">ADB@127.0.0.1</a>:34999)</strong> 。仅当所选目标为 Android 时，下拉菜单中才会显示该条目。</p><p>选择  <strong>Build &amp; Run</strong>  时，Unity Editor 会自动为应用程序创建 adb 隧道。如果要对另一应用程序进行性能分析，或者重新启动 adb 服务器，则需要手动配置此隧道。为此，请打开终端窗口或命令提示符窗口，并输入以下内容：</p><ul><li><p>通过 USB 线缆建立编辑器到 Android 的连接时需要</p><p><code>adb forward tcp:34999 localabstract:Unity-{insert bundle identifier here}</code></p></li><li><p>通过 USB 线缆建立 Android 到编辑器的连接时需要</p><p><code>adb reverse tcp:34998 tcp:34999</code></p></li></ul><p>要将深度性能分析用于 Android 构建，必须启用 <a href="/docs/platform-specific/android/android-getting-started/class-player-settings-android">Android Player Settings</a> 中的 Mono Scripting Backend 设置（菜单： <strong>Edit</strong>  <!-- -->&gt;<!-- -->  <strong>Project Settings</strong>  <!-- -->&gt;<!-- -->  <strong>Player</strong>  <!-- -->&gt;<!-- -->  <strong>Android</strong>  <!-- -->&gt;<!-- -->  <strong>Other Settings</strong> ），然后输入以下内容以便通过 adb 命令来启动游戏：</p><div class="codeBlockContainer_CBWl theme-code-block"><div class="codeBlockContent_vhl8" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_w2AC thin-scrollbar"><code class="codeBlockLines_OfWd"><span class="token-line" style="color:#393A34"><span class="token plain">~$ adb shell am start -n {insert bundle identifier here}/com.unity3d.player.UnityPlayerActivity -e &#x27;unity&#x27; &#x27;-deepprofiling&#x27;</span><br></span></code></pre><button type="button" aria-label="复制代码到剪贴板" title="复制" class="copyButton_R7VQ clean-btn"><span class="copyButtonIcons_Uqyx" aria-hidden="true"><svg class="copyButtonIcon_CtfL" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Mq1p" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="android-chrome-os-远程性能分析">Android Chrome OS 远程性能分析<a class="hash-link" href="#android-chrome-os-远程性能分析" title="标题的直接链接">​</a></h3><p>Unity 无法自动发现 Chrome OS 设备。要启动连接，请通过 Android Debug Bridge (adb) 通过其 IP 地址连接到设备，然后从  <strong>Attach to Player</strong>  下拉菜单中选择 <code>&amp;lt;Enter IP&amp;gt;</code> 并输入设备的 IP 地址。连接后，您可以像如常对应用程序进行性能分析。</p><h2 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="在-unity-编辑器中进行性能分析">在 Unity 编辑器中进行性能分析<a class="hash-link" href="#在-unity-编辑器中进行性能分析" title="标题的直接链接">​</a></h2><p>使用 Profiler 窗口在编辑器中运行应用程序并进行性能分析时，结果只是该应用程序在目标平台上运行时的行为的近似值。这是因为运行模式与编辑器的运行过程相同，所以无法将应用程序的 CPU、GPU 和内存使用量数据与 Unity 编辑器的使用量数据完全隔离。这会导致得出的性能分析数据出现误差。</p><p>要获得更好的性能分析结果，应该始终在目标设备上对应用程序进行性能分析，并且仅在编辑器中进行性能分析以快速迭代在设备上已确定的问题。</p><p>还可以在运行模式下进行性能分析或是对编辑器进行性能分析以确定与应用程序性能无关的问题，例如较长的加载时间或无响应的编辑器是否会减慢迭代时间，或者应用程序是否在运行模式下性能不佳。</p><p>每当在编辑器中进行性能分析时，都应确保在最大化视图中打开运行模式，并减少打开的编辑器窗口的数量。这可确保其他编辑器窗口不会在渲染线程和 GPU 上耗尽时间，从而影响性能数据。当运行模式处于最大化视图时，它会以更接近目标设备的分辨率运行应用程序，这会直接影响性能问题，例如与填充率相关的问题。</p><h3 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="在运行模式下进行性能分析">在运行模式下进行性能分析<a class="hash-link" href="#在运行模式下进行性能分析" title="标题的直接链接">​</a></h3><p>性能分析器的默认目标是运行模式，这会在编辑器运行运行模式时记录活动。运行模式性能分析可用于测试快速更改而无需重新构建播放器，但是不应用于替代验证应用程序目标平台和设备上的构建。这是因为运行模式在与编辑器相同的应用程序和主线程中运行，这意味着在运行模式下进行性能分析时，编辑器的系统（例如 UI、Inspector、Scene 视图渲染和资源管理）会影响应用程序的性能和内存性能分析测量。</p><p>要在运行模式下有效地进行性能分析，应该定期构建应用程序并将它们部署到一系列目标设备（高规格和低规格设备），并在这些设备上对应用程序进行测试和性能分析。如果在这些设备上发现应用程序方面的性能问题，请缩小最需要关注的区域。</p><p>随后可以在运行模式下对应用程序进行性能分析，并快速迭代对应用程序进行的任何更改。可以使用通过在目标设备上对应用程序进行性能分析而获得的信息来确定在运行模式下对应用程序进行性能分析后是否存在任何类似行为。随后可以更改应用程序，并再次在运行模式下进行性能分析以快速查看更改所产生的效果。一旦对更改感到满意，请再次构建应用程序并部署到目标设备以验证更改。</p><h4 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="playerloop-和-editorloop-样本">PlayerLoop 和 EditorLoop 样本<a class="hash-link" href="#playerloop-和-editorloop-样本" title="标题的直接链接">​</a></h4><p>为了减少编辑器在运行运行模式时创建的性能分析数据中的噪声和误导性测量数量，CPU 和 GPU 性能分析器模块将其时序拆分为在  <strong>PlayerLoop</strong>  和  <strong>EditorLoop</strong>  中发生的时序。Unity 会向这些类型的性能分析器样本分配 <a href="/docs/unity-overview/analysis/profiler/profiler-markers">PlayerLoop 和 EditorLoop 标记</a>。</p><p>当性能分析器以运行模式为目标时，它只收集发生在 PlayerLoop 内部发生的时序样本。</p><p>在 <a href="/docs/unity-overview/analysis/profiler/profiler-window/profiler-cpu#%E5%9B%BE%E8%A1%A8%E7%B1%BB%E5%88%AB">CPU 性能分析器模块图表</a>中，Unity 将所有 EditorLoop 样本都分类为  <strong>Others</strong> 。因此，EditorLoop 样本是该类别的最大贡献者。如果想了解编辑器在这段时间内的操作，并且还想获得有关  <strong>Others</strong>  类别的其他贡献者的更详细细分，请将性能分析器目标更改为编辑器。</p><p> <strong>重要信息：</strong> 如果使用<a href="/docs/unity-overview/analysis/profiler/profiler-window/profiler-window#%E6%B7%B1%E5%BA%A6%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90">深度性能分析</a>并以运行模式为目标，则它对在 PlayerLoop 和 EditorLoop 中发生的每个函数调用都会产生性能影响。这是因为深度性能分析会在域重新加载时挂接到任何脚本方法调用的开始和结束，不会检测哪些部分从未从 PlayerLoop 进行调用。EditorLoop 中发生的方法调用不会产生完整的样本创建开销，但它们仍会检查是否应发出样本，这会导致较小但仍然存在的开销。</p><h3 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="对编辑器进行性能分析">对编辑器进行性能分析<a class="hash-link" href="#对编辑器进行性能分析" title="标题的直接链接">​</a></h3><p>将性能分析器的目标更改为 <strong>编辑器</strong> 时，之前隐藏在 EditorLoop 标记下的所有样本都会归类到其各自的类别中。这意味着 CPU 性能分析器模块详细信息面板及其图表中的信息会显著更改。</p><p>要对编辑器的启动时间进行性能分析，请使用命令行选项 <code>-profiler-enable</code> 启动编辑器。</p><p>要减少 Profiler 窗口对编辑器性能的影响，可以使用<a href="/docs/unity-overview/analysis/profiler/profiler-window/profiler-window#%E7%8B%AC%E7%AB%8B%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%E5%99%A8">独立性能分析器</a>（它会在自己的进程中打开 Profiler 窗口）。如果选择编辑器作为性能分析目标，或是<a href="/docs/unity-overview/analysis/profiler/profiler-window/profiler-window#%E6%B7%B1%E5%BA%A6%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90">对应用程序进行深度性能分析</a>，那么这会尤其有用，因为 Profiler 窗口本身通常使用可能会使性能数据出现偏差的资源。</p><h2 class="anchor anchorWithHideOnScrollNavbar_c5FC" id="对应用程序进行性能分析的最佳实践">对应用程序进行性能分析的最佳实践<a class="hash-link" href="#对应用程序进行性能分析的最佳实践" title="标题的直接链接">​</a></h2><p>对应用程序进行性能分析时，可以采取一些措施来确保性能分析会话之间的一致性，并确保 Unity 使用的进程不会影响性能分析数据：</p><ul><li>只添加与要调查到 Profiler 窗口的区域相关的<a href="/docs/unity-overview/analysis/profiler/profiler-window/profiler-window#%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%E5%99%A8%E6%A8%A1%E5%9D%97">性能分析器模块</a>。要向性能分析器添加和移除模块，请选择 Profiler 窗口左上角的下拉选单。</li><li>避免使用深度性能分析，因为它会在使用时产生较高开销。如果要查看有关带有标记（如 GC.Alloc 或 JobFence.Complete）的样本的更多详细信息，请导航到 Profiler 窗口工具栏并启用 <a href="/docs/unity-overview/analysis/profiler/profiler-window/profiler-window#%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%E5%99%A8%E6%8E%A7%E4%BB%B6">Call Stacks 设置</a>。这可提供样本的完整调用栈，其中会提供所需信息，而不会产生深度性能分析的开销。</li><li>如果在性能分析器收集数据时不需要查看 Hierarchy 或 Timeline 视图更新，请禁用 Live 设置。停止记录以查看窗口的数据更新。</li><li>使用 F9 快捷键启用或禁用性能分析器。可以使用此快捷键捕获性能数据，而无需打开 Profiler 窗口。如果打开了独立性能分析器，则使用此快捷键会在此窗口中开始记录。</li></ul><hr><ul><li>在 <a href="https://docs.unity3d.com/Manual/30_search.html?q=newin20193" target="_blank" rel="noopener noreferrer">2019.3</a> 中添加了 Deep Profiling Support NewIn20193</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://crowdin.com/project/docusaurus-v2/zh-Hans" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_OMbO" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_vA0S"><span class="theme-last-updated">最后<!-- -->由 <b>danyow</b> <!-- -->于 <b><time datetime="2022-03-31T15:56:20.000Z">2022/3/31</time></b> <!-- -->更新</span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/unity-overview/analysis/profiler/profiler-markers"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">常见性能分析器标记</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/unity-overview/analysis/profiler/profiler-window/profiler-window"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">Profiler 窗口</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_jWtb thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#profile-your-application-on-a-target-platform" class="table-of-contents__link toc-highlight">Profile your application on a target platform</a><ul><li><a href="#在-profiler-窗口中连接到播放器" class="table-of-contents__link toc-highlight">在 Profiler 窗口中连接到播放器</a></li><li><a href="#using-the-attach-to-player-search-bar" class="table-of-contents__link toc-highlight">Using the Attach to Player search bar</a></li><li><a href="#attach-to-player-properties" class="table-of-contents__link toc-highlight">Attach to Player properties</a></li><li><a href="#player-name-device-categories" class="table-of-contents__link toc-highlight">Player name device categories</a></li><li><a href="#平台特定性能分析指南" class="table-of-contents__link toc-highlight">平台特定性能分析指南</a></li><li><a href="#android-chrome-os-远程性能分析" class="table-of-contents__link toc-highlight">Android Chrome OS 远程性能分析</a></li></ul></li><li><a href="#在-unity-编辑器中进行性能分析" class="table-of-contents__link toc-highlight">在 Unity 编辑器中进行性能分析</a><ul><li><a href="#在运行模式下进行性能分析" class="table-of-contents__link toc-highlight">在运行模式下进行性能分析</a></li><li><a href="#对编辑器进行性能分析" class="table-of-contents__link toc-highlight">对编辑器进行性能分析</a></li></ul></li><li><a href="#对应用程序进行性能分析的最佳实践" class="table-of-contents__link toc-highlight">对应用程序进行性能分析的最佳实践</a></li></ul></div></div></div></div></main></div></div></div>
<script src="/assets/js/runtime~main.4e562e6e.js"></script>
<script src="/assets/js/main.9af7a4d9.js"></script>
</body>
</html>