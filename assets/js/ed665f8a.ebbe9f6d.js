"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[86392],{35318:function(t,e,n){n.d(e,{Zo:function(){return p},kt:function(){return f}});var r=n(27378);function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var s=r.createContext({}),l=function(t){var e=r.useContext(s),n=e;return t&&(n="function"==typeof t?t(e):a(a({},e),t)),n},p=function(t){var e=l(t.components);return r.createElement(s.Provider,{value:e},t.children)},u={inlineCode:"code",wrapper:function(t){var e=t.children;return r.createElement(r.Fragment,{},e)}},d=r.forwardRef((function(t,e){var n=t.components,i=t.mdxType,o=t.originalType,s=t.parentName,p=c(t,["components","mdxType","originalType","parentName"]),d=l(n),f=i,g=d["".concat(s,".").concat(f)]||d[f]||u[f]||o;return n?r.createElement(g,a(a({ref:e},p),{},{components:n})):r.createElement(g,a({ref:e},p))}));function f(t,e){var n=arguments,i=e&&e.mdxType;if("string"==typeof t||i){var o=n.length,a=new Array(o);a[0]=d;var c={};for(var s in e)hasOwnProperty.call(e,s)&&(c[s]=e[s]);c.originalType=t,c.mdxType="string"==typeof t?t:i,a[1]=c;for(var l=2;l<o;l++)a[l]=n[l];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},86284:function(t,e,n){n.r(e),n.d(e,{assets:function(){return l},contentTitle:function(){return c},default:function(){return d},frontMatter:function(){return a},metadata:function(){return s},toc:function(){return p}});n(27378);var r=n(35318);function i(){return i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i.apply(this,arguments)}function o(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}const a={id:"Handling platform specific settings for IL2CPP additional arguments",slug:"/scripting-section/unity-architecture/scripting-backends/il2cpp/handling-il2cpp-additional-args"},c="Handling platform specific settings for IL2CPP additional arguments",s={unversionedId:"unity/scripting-section/unity-architecture/scripting-backends/il2cpp/Handling platform specific settings for IL2CPP additional arguments",id:"version-Unity@2022.1/unity/scripting-section/unity-architecture/scripting-backends/il2cpp/Handling platform specific settings for IL2CPP additional arguments",title:"Handling platform specific settings for IL2CPP additional arguments",description:"If your project has the additional IL2CPP arguments set, then compiling for more than one platform might not work as expected, especially when cross compiling for Linux.",source:"@site/versioned_docs/version-Unity@2022.1/unity/scripting-section/unity-architecture/scripting-backends/il2cpp/handling-il2cpp-additional-args.md",sourceDirName:"unity/scripting-section/unity-architecture/scripting-backends/il2cpp",slug:"/scripting-section/unity-architecture/scripting-backends/il2cpp/handling-il2cpp-additional-args",permalink:"/docs/scripting-section/unity-architecture/scripting-backends/il2cpp/handling-il2cpp-additional-args",editUrl:"https://crowdin.com/project/docusaurus-v2/zh-Hans",tags:[],version:"Unity@2022.1",lastUpdatedBy:"danyow",lastUpdatedAt:1648742180,formattedLastUpdatedAt:"2022/3/31",frontMatter:{id:"Handling platform specific settings for IL2CPP additional arguments",slug:"/scripting-section/unity-architecture/scripting-backends/il2cpp/handling-il2cpp-additional-args"},sidebar:"unity",previous:{title:"IL2CPP Overview",permalink:"/docs/scripting-section/unity-architecture/scripting-backends/il2cpp/il2cpp"},next:{title:"\u6258\u7ba1\u5806\u6808\u8ddf\u8e2a\u4e0e IL2CPP",permalink:"/docs/scripting-section/unity-architecture/scripting-backends/il2cpp/il2cpp-managed-stack-traces"}},l={},p=[{value:"IPreprocessBuildWithReport hook",id:"ipreprocessbuildwithreport-hook",level:2}],u={toc:p};function d(t){var{components:e}=t,n=o(t,["components"]);return(0,r.kt)("wrapper",i({},u,n,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("h1",i({},{id:"handling-platform-specific-settings-for-il2cpp-additional-arguments"}),"Handling platform specific settings for IL2CPP additional arguments"),(0,r.kt)("p",null,"If your project has the additional IL2CPP arguments set, then compiling for more than one platform might not work as expected, especially when cross compiling for Linux."),(0,r.kt)("p",null,"To find out if any additional IL2CPP arguments are already set, do one of the following:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Check if the environment variable ",(0,r.kt)("inlineCode",{parentName:"li"},"IL2CPP_ADDITIONAL_ARGS")," is set."),(0,r.kt)("li",{parentName:"ul"},"In ",(0,r.kt)("inlineCode",{parentName:"li"},"ProjectSettings/ProjectSettings.asset"),", check if the editor script has a value called ",(0,r.kt)("inlineCode",{parentName:"li"},"additionalIl2CppArgs"),".")),(0,r.kt)("p",null,"Note that the methods for setting additional IL2CPP arguments are globally applied to all platforms, which can cause compilation issues if set for a platform other than the desired platform. Use the ",(0,r.kt)("inlineCode",{parentName:"p"},"IPreprocessBuildWithReport")," hook (as shown below) to ensure IL2CPP arguments are set only for the platform that requires them."),(0,r.kt)("h2",i({},{id:"ipreprocessbuildwithreport-hook"}),"IPreprocessBuildWithReport hook"),(0,r.kt)("p",null,"Use the ",(0,r.kt)("inlineCode",{parentName:"p"},"IPreprocessBuildWithReport")," hook to build scripts or the Build dialog to set the additional arguments:"),(0,r.kt)("pre",null,(0,r.kt)("code",i({parentName:"pre"},{}),'class MyCustomPreprocessBuild: IPreprocessBuildWithReport\n{\n    public int callbackOrder { get { return 0; } }\n    public void OnPreprocessBuild(BuildReport report)\n    {\n        string addlArgs = "";\n        if (report.summary.platform == BuildTarget.StandaloneWindows || report.summary.platform == BuildTarget.StandaloneWindows64)\n            addlArgs = "--compiler-flags=\\"d2ssa-cfg-jt\\"";\n        UnityEngine.Debug.Log($"Setting Additional IL2CPP Args = \\"{addlArgs}\\" for platform {report.summary.platform}");\n        PlayerSettings.SetAdditionalIl2CppArgs(addlArgs);\n    }\n}\n')))}d.isMDXComponent=!0}}]);